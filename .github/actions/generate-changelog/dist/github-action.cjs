"use strict";var Ea=Object.create;var mn=Object.defineProperty;var xa=Object.getOwnPropertyDescriptor;var Aa=Object.getOwnPropertyNames;var Pa=Object.getPrototypeOf,Ma=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Fa=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Aa(t))!Ma.call(e,s)&&s!==r&&mn(e,s,{get:()=>t[s],enumerable:!(n=xa(t,s))||n.enumerable});return e};var ke=(e,t,r)=>(r=e!=null?Ea(Pa(e)):{},Fa(t||!e||!e.__esModule?mn(r,"default",{value:e,enumerable:!0}):r,e));var et=w(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.toCommandProperties=Oe.toCommandValue=void 0;function Da(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Oe.toCommandValue=Da;function qa(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Oe.toCommandProperties=qa});var yn=w(W=>{"use strict";var La=W&&W.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ia=W&&W.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Na=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&La(t,e,r);return Ia(t,e),t};Object.defineProperty(W,"__esModule",{value:!0});W.issue=W.issueCommand=void 0;var $a=Na(require("os")),_n=et();function vn(e,t,r){let n=new Wt(e,t,r);process.stdout.write(n.toString()+$a.EOL)}W.issueCommand=vn;function ja(e,t=""){vn(e,{},t)}W.issue=ja;var gn="::",Wt=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=gn+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let s=this.properties[n];s&&(r?r=!1:t+=",",t+=`${n}=${Ua(s)}`)}}return t+=`${gn}${Ba(this.message)}`,t}};function Ba(e){return _n.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Ua(e){return _n.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var Jt=w(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.default=Ha;var Ga=Va(require("crypto"));function Va(e){return e&&e.__esModule?e:{default:e}}var rt=new Uint8Array(256),tt=rt.length;function Ha(){return tt>rt.length-16&&(Ga.default.randomFillSync(rt),tt=0),rt.slice(tt,tt+=16)}});var bn=w(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.default=void 0;var za=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;nt.default=za});var $e=w(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.default=void 0;var Wa=Ka(bn());function Ka(e){return e&&e.__esModule?e:{default:e}}function Ja(e){return typeof e=="string"&&Wa.default.test(e)}var Qa=Ja;st.default=Qa});var je=w(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.default=void 0;var Ya=Xa($e());function Xa(e){return e&&e.__esModule?e:{default:e}}var A=[];for(let e=0;e<256;++e)A.push((e+256).toString(16).substr(1));function Za(e,t=0){let r=(A[e[t+0]]+A[e[t+1]]+A[e[t+2]]+A[e[t+3]]+"-"+A[e[t+4]]+A[e[t+5]]+"-"+A[e[t+6]]+A[e[t+7]]+"-"+A[e[t+8]]+A[e[t+9]]+"-"+A[e[t+10]]+A[e[t+11]]+A[e[t+12]]+A[e[t+13]]+A[e[t+14]]+A[e[t+15]]).toLowerCase();if(!(0,Ya.default)(r))throw TypeError("Stringified UUID is invalid");return r}var eu=Za;it.default=eu});var kn=w(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.default=void 0;var tu=Tn(Jt()),ru=Tn(je());function Tn(e){return e&&e.__esModule?e:{default:e}}var wn,Qt,Yt=0,Xt=0;function nu(e,t,r){let n=t&&r||0,s=t||new Array(16);e=e||{};let i=e.node||wn,o=e.clockseq!==void 0?e.clockseq:Qt;if(i==null||o==null){let d=e.random||(e.rng||tu.default)();i==null&&(i=wn=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),o==null&&(o=Qt=(d[6]<<8|d[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:Xt+1,c=a-Yt+(l-Xt)/1e4;if(c<0&&e.clockseq===void 0&&(o=o+1&16383),(c<0||a>Yt)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Yt=a,Xt=l,Qt=o,a+=122192928e5;let u=((a&268435455)*1e4+l)%4294967296;s[n++]=u>>>24&255,s[n++]=u>>>16&255,s[n++]=u>>>8&255,s[n++]=u&255;let f=a/4294967296*1e4&268435455;s[n++]=f>>>8&255,s[n++]=f&255,s[n++]=f>>>24&15|16,s[n++]=f>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let d=0;d<6;++d)s[n+d]=i[d];return t||(0,ru.default)(s)}var su=nu;ot.default=su});var Zt=w(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.default=void 0;var iu=ou($e());function ou(e){return e&&e.__esModule?e:{default:e}}function au(e){if(!(0,iu.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var uu=au;at.default=uu});var er=w(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.default=du;me.URL=me.DNS=void 0;var cu=On(je()),lu=On(Zt());function On(e){return e&&e.__esModule?e:{default:e}}function fu(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Cn="6ba7b810-9dad-11d1-80b4-00c04fd430c8";me.DNS=Cn;var Sn="6ba7b811-9dad-11d1-80b4-00c04fd430c8";me.URL=Sn;function du(e,t,r){function n(s,i,o,a){if(typeof s=="string"&&(s=fu(s)),typeof i=="string"&&(i=(0,lu.default)(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+s.length);if(l.set(i),l.set(s,i.length),l=r(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,o){a=a||0;for(let c=0;c<16;++c)o[a+c]=l[c];return o}return(0,cu.default)(l)}try{n.name=e}catch{}return n.DNS=Cn,n.URL=Sn,n}});var Rn=w(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.default=void 0;var hu=pu(require("crypto"));function pu(e){return e&&e.__esModule?e:{default:e}}function mu(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),hu.default.createHash("md5").update(e).digest()}var gu=mu;ut.default=gu});var xn=w(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.default=void 0;var _u=En(er()),vu=En(Rn());function En(e){return e&&e.__esModule?e:{default:e}}var yu=(0,_u.default)("v3",48,vu.default),bu=yu;ct.default=bu});var Pn=w(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.default=void 0;var wu=An(Jt()),Tu=An(je());function An(e){return e&&e.__esModule?e:{default:e}}function ku(e,t,r){e=e||{};let n=e.random||(e.rng||wu.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let s=0;s<16;++s)t[r+s]=n[s];return t}return(0,Tu.default)(n)}var Ou=ku;lt.default=Ou});var Mn=w(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.default=void 0;var Cu=Su(require("crypto"));function Su(e){return e&&e.__esModule?e:{default:e}}function Ru(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Cu.default.createHash("sha1").update(e).digest()}var Eu=Ru;ft.default=Eu});var Dn=w(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.default=void 0;var xu=Fn(er()),Au=Fn(Mn());function Fn(e){return e&&e.__esModule?e:{default:e}}var Pu=(0,xu.default)("v5",80,Au.default),Mu=Pu;dt.default=Mu});var qn=w(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.default=void 0;var Fu="00000000-0000-0000-0000-000000000000";ht.default=Fu});var Ln=w(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.default=void 0;var Du=qu($e());function qu(e){return e&&e.__esModule?e:{default:e}}function Lu(e){if(!(0,Du.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Iu=Lu;pt.default=Iu});var In=w(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Object.defineProperty(Z,"v1",{enumerable:!0,get:function(){return Nu.default}});Object.defineProperty(Z,"v3",{enumerable:!0,get:function(){return $u.default}});Object.defineProperty(Z,"v4",{enumerable:!0,get:function(){return ju.default}});Object.defineProperty(Z,"v5",{enumerable:!0,get:function(){return Bu.default}});Object.defineProperty(Z,"NIL",{enumerable:!0,get:function(){return Uu.default}});Object.defineProperty(Z,"version",{enumerable:!0,get:function(){return Gu.default}});Object.defineProperty(Z,"validate",{enumerable:!0,get:function(){return Vu.default}});Object.defineProperty(Z,"stringify",{enumerable:!0,get:function(){return Hu.default}});Object.defineProperty(Z,"parse",{enumerable:!0,get:function(){return zu.default}});var Nu=se(kn()),$u=se(xn()),ju=se(Pn()),Bu=se(Dn()),Uu=se(qn()),Gu=se(Ln()),Vu=se($e()),Hu=se(je()),zu=se(Zt());function se(e){return e&&e.__esModule?e:{default:e}}});var Bn=w(K=>{"use strict";var Wu=K&&K.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ku=K&&K.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),$n=K&&K.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Wu(t,e,r);return Ku(t,e),t};Object.defineProperty(K,"__esModule",{value:!0});K.prepareKeyValueMessage=K.issueFileCommand=void 0;var Nn=$n(require("fs")),tr=$n(require("os")),Ju=In(),jn=et();function Qu(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Nn.existsSync(r))throw new Error(`Missing file at path: ${r}`);Nn.appendFileSync(r,`${jn.toCommandValue(t)}${tr.EOL}`,{encoding:"utf8"})}K.issueFileCommand=Qu;function Yu(e,t){let r=`ghadelimiter_${Ju.v4()}`,n=jn.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${tr.EOL}${n}${tr.EOL}${r}`}K.prepareKeyValueMessage=Yu});var Gn=w(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.checkBypass=Ce.getProxyUrl=void 0;function Xu(e){let t=e.protocol==="https:";if(Un(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}Ce.getProxyUrl=Xu;function Un(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let s of t.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(n.some(i=>i===s))return!0;return!1}Ce.checkBypass=Un});var Wn=w(Se=>{"use strict";var Uh=require("net"),Zu=require("tls"),rr=require("http"),Vn=require("https"),ec=require("events"),Gh=require("assert"),tc=require("util");Se.httpOverHttp=rc;Se.httpsOverHttp=nc;Se.httpOverHttps=sc;Se.httpsOverHttps=ic;function rc(e){var t=new ie(e);return t.request=rr.request,t}function nc(e){var t=new ie(e);return t.request=rr.request,t.createSocket=Hn,t.defaultPort=443,t}function sc(e){var t=new ie(e);return t.request=Vn.request,t}function ic(e){var t=new ie(e);return t.request=Vn.request,t.createSocket=Hn,t.defaultPort=443,t}function ie(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||rr.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,s,i,o){for(var a=zn(s,i,o),l=0,c=t.requests.length;l<c;++l){var u=t.requests[l];if(u.host===a.host&&u.port===a.port){t.requests.splice(l,1),u.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}tc.inherits(ie,ec.EventEmitter);ie.prototype.addRequest=function(t,r,n,s){var i=this,o=nr({request:t},i.options,zn(r,n,s));if(i.sockets.length>=this.maxSockets){i.requests.push(o);return}i.createSocket(o,function(a){a.on("free",l),a.on("close",c),a.on("agentRemove",c),t.onSocket(a);function l(){i.emit("free",a,o)}function c(u){i.removeSocket(a),a.removeListener("free",l),a.removeListener("close",c),a.removeListener("agentRemove",c)}})};ie.prototype.createSocket=function(t,r){var n=this,s={};n.sockets.push(s);var i=nr({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(i.localAddress=t.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),ue("making CONNECT request");var o=n.request(i);o.useChunkedEncodingByDefault=!1,o.once("response",a),o.once("upgrade",l),o.once("connect",c),o.once("error",u),o.end();function a(f){f.upgrade=!0}function l(f,d,m){process.nextTick(function(){c(f,d,m)})}function c(f,d,m){if(o.removeAllListeners(),d.removeAllListeners(),f.statusCode!==200){ue("tunneling socket could not be established, statusCode=%d",f.statusCode),d.destroy();var M=new Error("tunneling socket could not be established, statusCode="+f.statusCode);M.code="ECONNRESET",t.request.emit("error",M),n.removeSocket(s);return}if(m.length>0){ue("got illegal response body from proxy"),d.destroy();var M=new Error("got illegal response body from proxy");M.code="ECONNRESET",t.request.emit("error",M),n.removeSocket(s);return}return ue("tunneling connection has established"),n.sockets[n.sockets.indexOf(s)]=d,r(d)}function u(f){o.removeAllListeners(),ue(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var d=new Error("tunneling socket could not be established, cause="+f.message);d.code="ECONNRESET",t.request.emit("error",d),n.removeSocket(s)}};ie.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(s){n.request.onSocket(s)})}};function Hn(e,t){var r=this;ie.prototype.createSocket.call(r,e,function(n){var s=e.request.getHeader("host"),i=nr({},r.options,{socket:n,servername:s?s.replace(/:.*$/,""):e.host}),o=Zu.connect(0,i);r.sockets[r.sockets.indexOf(n)]=o,t(o)})}function zn(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function nr(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var s=Object.keys(n),i=0,o=s.length;i<o;++i){var a=s[i];n[a]!==void 0&&(e[a]=n[a])}}return e}var ue;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ue=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:ue=function(){};Se.debug=ue});var Jn=w((Hh,Kn)=>{Kn.exports=Wn()});var Yn=w(O=>{"use strict";var oc=O&&O.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ac=O&&O.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),yt=O&&O.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&oc(t,e,r);return ac(t,e),t},E=O&&O.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(O,"__esModule",{value:!0});O.HttpClient=O.isHttps=O.HttpClientResponse=O.HttpClientError=O.getProxyUrl=O.MediaTypes=O.Headers=O.HttpCodes=void 0;var mt=yt(require("http")),sr=yt(require("https")),Qn=yt(Gn()),gt=yt(Jn()),ee;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(ee=O.HttpCodes||(O.HttpCodes={}));var L;(function(e){e.Accept="accept",e.ContentType="content-type"})(L=O.Headers||(O.Headers={}));var ce;(function(e){e.ApplicationJson="application/json"})(ce=O.MediaTypes||(O.MediaTypes={}));function uc(e){let t=Qn.getProxyUrl(new URL(e));return t?t.href:""}O.getProxyUrl=uc;var cc=[ee.MovedPermanently,ee.ResourceMoved,ee.SeeOther,ee.TemporaryRedirect,ee.PermanentRedirect],lc=[ee.BadGateway,ee.ServiceUnavailable,ee.GatewayTimeout],fc=["OPTIONS","GET","DELETE","HEAD"],dc=10,hc=5,Re=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,Re.prototype)}};O.HttpClientError=Re;var vt=class{constructor(t){this.message=t}readBody(){return E(this,void 0,void 0,function*(){return new Promise(t=>E(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};O.HttpClientResponse=vt;function pc(e){return new URL(e).protocol==="https:"}O.isHttps=pc;var ir=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return E(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return E(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return E(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return E(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return E(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return E(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return E(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,s){return E(this,void 0,void 0,function*(){return this.request(t,r,n,s)})}getJson(t,r={}){return E(this,void 0,void 0,function*(){r[L.Accept]=this._getExistingOrDefaultHeader(r,L.Accept,ce.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return E(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[L.Accept]=this._getExistingOrDefaultHeader(n,L.Accept,ce.ApplicationJson),n[L.ContentType]=this._getExistingOrDefaultHeader(n,L.ContentType,ce.ApplicationJson);let i=yield this.post(t,s,n);return this._processResponse(i,this.requestOptions)})}putJson(t,r,n={}){return E(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[L.Accept]=this._getExistingOrDefaultHeader(n,L.Accept,ce.ApplicationJson),n[L.ContentType]=this._getExistingOrDefaultHeader(n,L.ContentType,ce.ApplicationJson);let i=yield this.put(t,s,n);return this._processResponse(i,this.requestOptions)})}patchJson(t,r,n={}){return E(this,void 0,void 0,function*(){let s=JSON.stringify(r,null,2);n[L.Accept]=this._getExistingOrDefaultHeader(n,L.Accept,ce.ApplicationJson),n[L.ContentType]=this._getExistingOrDefaultHeader(n,L.ContentType,ce.ApplicationJson);let i=yield this.patch(t,s,n);return this._processResponse(i,this.requestOptions)})}request(t,r,n,s){return E(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(r),o=this._prepareRequest(t,i,s),a=this._allowRetries&&fc.includes(t)?this._maxRetries+1:1,l=0,c;do{if(c=yield this.requestRaw(o,n),c&&c.message&&c.message.statusCode===ee.Unauthorized){let f;for(let d of this.handlers)if(d.canHandleAuthentication(c)){f=d;break}return f?f.handleAuthentication(this,o,n):c}let u=this._maxRedirects;for(;c.message.statusCode&&cc.includes(c.message.statusCode)&&this._allowRedirects&&u>0;){let f=c.message.headers.location;if(!f)break;let d=new URL(f);if(i.protocol==="https:"&&i.protocol!==d.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield c.readBody(),d.hostname!==i.hostname)for(let m in s)m.toLowerCase()==="authorization"&&delete s[m];o=this._prepareRequest(t,d,s),c=yield this.requestRaw(o,n),u--}if(!c.message.statusCode||!lc.includes(c.message.statusCode))return c;l+=1,l<a&&(yield c.readBody(),yield this._performExponentialBackoff(l))}while(l<a);return c})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return E(this,void 0,void 0,function*(){return new Promise((n,s)=>{function i(o,a){o?s(o):a?n(a):s(new Error("Unknown error"))}this.requestRawWithCallback(t,r,i)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let s=!1;function i(l,c){s||(s=!0,n(l,c))}let o=t.httpModule.request(t.options,l=>{let c=new vt(l);i(void 0,c)}),a;o.on("socket",l=>{a=l}),o.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),i(new Error(`Request timeout: ${t.options.path}`))}),o.on("error",function(l){i(l)}),r&&typeof r=="string"&&o.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){o.end()}),r.pipe(o)):o.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let s={};s.parsedUrl=r;let i=s.parsedUrl.protocol==="https:";s.httpModule=i?sr:mt;let o=i?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):o,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=t,s.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(s.options);return s}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},_t(this.requestOptions.headers),_t(t||{})):_t(t||{})}_getExistingOrDefaultHeader(t,r,n){let s;return this.requestOptions&&this.requestOptions.headers&&(s=_t(this.requestOptions.headers)[r]),t[r]||s||n}_getAgent(t){let r,n=Qn.getProxyUrl(t),s=n&&n.hostname;if(this._keepAlive&&s&&(r=this._proxyAgent),this._keepAlive&&!s&&(r=this._agent),r)return r;let i=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||mt.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,c=n.protocol==="https:";i?l=c?gt.httpsOverHttps:gt.httpsOverHttp:l=c?gt.httpOverHttps:gt.httpOverHttp,r=l(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:o};r=i?new sr.Agent(a):new mt.Agent(a),this._agent=r}return r||(r=i?sr.globalAgent:mt.globalAgent),i&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return E(this,void 0,void 0,function*(){t=Math.min(dc,t);let r=hc*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return E(this,void 0,void 0,function*(){return new Promise((n,s)=>E(this,void 0,void 0,function*(){let i=t.message.statusCode||0,o={statusCode:i,result:null,headers:{}};i===ee.NotFound&&n(o);function a(u,f){if(typeof f=="string"){let d=new Date(f);if(!isNaN(d.valueOf()))return d}return f}let l,c;try{c=yield t.readBody(),c&&c.length>0&&(r&&r.deserializeDates?l=JSON.parse(c,a):l=JSON.parse(c),o.result=l),o.headers=t.message.headers}catch{}if(i>299){let u;l&&l.message?u=l.message:c&&c.length>0?u=c:u=`Failed request: (${i})`;let f=new Re(u,i);f.result=o.result,s(f)}else n(o)}))})}};O.HttpClient=ir;var _t=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var Xn=w(te=>{"use strict";var cr=te&&te.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(te,"__esModule",{value:!0});te.PersonalAccessTokenCredentialHandler=te.BearerCredentialHandler=te.BasicCredentialHandler=void 0;var or=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return cr(this,void 0,void 0,function*(){throw new Error("not implemented")})}};te.BasicCredentialHandler=or;var ar=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return cr(this,void 0,void 0,function*(){throw new Error("not implemented")})}};te.BearerCredentialHandler=ar;var ur=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return cr(this,void 0,void 0,function*(){throw new Error("not implemented")})}};te.PersonalAccessTokenCredentialHandler=ur});var ts=w(Ee=>{"use strict";var Zn=Ee&&Ee.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.OidcClient=void 0;var mc=Yn(),gc=Xn(),es=lr(),le=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new mc.HttpClient("actions/oidc-client",[new gc.BearerCredentialHandler(le.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Zn(this,void 0,void 0,function*(){let i=(r=(yield le.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(t){return Zn(this,void 0,void 0,function*(){try{let r=le.getIDTokenUrl();if(t){let s=encodeURIComponent(t);r=`${r}&audience=${s}`}es.debug(`ID token url is ${r}`);let n=yield le.getCall(r);return es.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};Ee.OidcClient=le});var pr=w(N=>{"use strict";var fr=N&&N.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(N,"__esModule",{value:!0});N.summary=N.markdownSummary=N.SUMMARY_DOCS_URL=N.SUMMARY_ENV_VAR=void 0;var _c=require("os"),dr=require("fs"),{access:vc,appendFile:yc,writeFile:bc}=dr.promises;N.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";N.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var hr=class{constructor(){this._buffer=""}filePath(){return fr(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[N.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${N.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield vc(t,dr.constants.R_OK|dr.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let s=Object.entries(n).map(([i,o])=>` ${i}="${o}"`).join("");return r?`<${t}${s}>${r}</${t}>`:`<${t}${s}>`}write(t){return fr(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?bc:yc)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return fr(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(_c.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),s=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(s).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",s=t.map(o=>this.wrap("li",o)).join(""),i=this.wrap(n,s);return this.addRaw(i).addEOL()}addTable(t){let r=t.map(s=>{let i=s.map(o=>{if(typeof o=="string")return this.wrap("td",o);let{header:a,data:l,colspan:c,rowspan:u}=o,f=a?"th":"td",d=Object.assign(Object.assign({},c&&{colspan:c}),u&&{rowspan:u});return this.wrap(f,l,d)}).join("");return this.wrap("tr",i)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:s,height:i}=n||{},o=Object.assign(Object.assign({},s&&{width:s}),i&&{height:i}),a=this.wrap("img",null,Object.assign({src:t,alt:r},o));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,s=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",i=this.wrap(s,t);return this.addRaw(i).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),s=this.wrap("blockquote",t,n);return this.addRaw(s).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},rs=new hr;N.markdownSummary=rs;N.summary=rs});var ns=w($=>{"use strict";var wc=$&&$.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Tc=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),kc=$&&$.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&wc(t,e,r);return Tc(t,e),t};Object.defineProperty($,"__esModule",{value:!0});$.toPlatformPath=$.toWin32Path=$.toPosixPath=void 0;var Oc=kc(require("path"));function Cc(e){return e.replace(/[\\]/g,"/")}$.toPosixPath=Cc;function Sc(e){return e.replace(/[/]/g,"\\")}$.toWin32Path=Sc;function Rc(e){return e.replace(/[/\\]/g,Oc.sep)}$.toPlatformPath=Rc});var lr=w(_=>{"use strict";var Ec=_&&_.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),xc=_&&_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ss=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ec(t,e,r);return xc(t,e),t},is=_&&_.__awaiter||function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(_,"__esModule",{value:!0});_.getIDToken=_.getState=_.saveState=_.group=_.endGroup=_.startGroup=_.info=_.notice=_.warning=_.error=_.debug=_.isDebug=_.setFailed=_.setCommandEcho=_.setOutput=_.getBooleanInput=_.getMultilineInput=_.getInput=_.addPath=_.setSecret=_.exportVariable=_.ExitCode=void 0;var J=yn(),ge=Bn(),xe=et(),os=ss(require("os")),Ac=ss(require("path")),Pc=ts(),as;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(as=_.ExitCode||(_.ExitCode={}));function Mc(e,t){let r=xe.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return ge.issueFileCommand("ENV",ge.prepareKeyValueMessage(e,t));J.issueCommand("set-env",{name:e},r)}_.exportVariable=Mc;function Fc(e){J.issueCommand("add-mask",{},e)}_.setSecret=Fc;function Dc(e){process.env.GITHUB_PATH||""?ge.issueFileCommand("PATH",e):J.issueCommand("add-path",{},e),process.env.PATH=`${e}${Ac.delimiter}${process.env.PATH}`}_.addPath=Dc;function mr(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}_.getInput=mr;function qc(e,t){let r=mr(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}_.getMultilineInput=qc;function Lc(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],s=mr(e,t);if(r.includes(s))return!0;if(n.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}_.getBooleanInput=Lc;function Ic(e,t){if(process.env.GITHUB_OUTPUT||"")return ge.issueFileCommand("OUTPUT",ge.prepareKeyValueMessage(e,t));process.stdout.write(os.EOL),J.issueCommand("set-output",{name:e},xe.toCommandValue(t))}_.setOutput=Ic;function Nc(e){J.issue("echo",e?"on":"off")}_.setCommandEcho=Nc;function $c(e){process.exitCode=as.Failure,us(e)}_.setFailed=$c;function jc(){return process.env.RUNNER_DEBUG==="1"}_.isDebug=jc;function Bc(e){J.issueCommand("debug",{},e)}_.debug=Bc;function us(e,t={}){J.issueCommand("error",xe.toCommandProperties(t),e instanceof Error?e.toString():e)}_.error=us;function Uc(e,t={}){J.issueCommand("warning",xe.toCommandProperties(t),e instanceof Error?e.toString():e)}_.warning=Uc;function Gc(e,t={}){J.issueCommand("notice",xe.toCommandProperties(t),e instanceof Error?e.toString():e)}_.notice=Gc;function Vc(e){process.stdout.write(e+os.EOL)}_.info=Vc;function cs(e){J.issue("group",e)}_.startGroup=cs;function ls(){J.issue("endgroup")}_.endGroup=ls;function Hc(e,t){return is(this,void 0,void 0,function*(){cs(e);let r;try{r=yield t()}finally{ls()}return r})}_.group=Hc;function zc(e,t){if(process.env.GITHUB_STATE||"")return ge.issueFileCommand("STATE",ge.prepareKeyValueMessage(e,t));J.issueCommand("save-state",{name:e},xe.toCommandValue(t))}_.saveState=zc;function Wc(e){return process.env[`STATE_${e}`]||""}_.getState=Wc;function Kc(e){return is(this,void 0,void 0,function*(){return yield Pc.OidcClient.getIDToken(e)})}_.getIDToken=Kc;var Jc=pr();Object.defineProperty(_,"summary",{enumerable:!0,get:function(){return Jc.summary}});var Qc=pr();Object.defineProperty(_,"markdownSummary",{enumerable:!0,get:function(){return Qc.markdownSummary}});var gr=ns();Object.defineProperty(_,"toPosixPath",{enumerable:!0,get:function(){return gr.toPosixPath}});Object.defineProperty(_,"toWin32Path",{enumerable:!0,get:function(){return gr.toWin32Path}});Object.defineProperty(_,"toPlatformPath",{enumerable:!0,get:function(){return gr.toPlatformPath}})});var ds=w((Xh,fs)=>{var Ae=1e3,Pe=Ae*60,Me=Pe*60,_e=Me*24,Yc=_e*7,Xc=_e*365.25;fs.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Zc(e);if(r==="number"&&isFinite(e))return t.long?tl(e):el(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Zc(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Xc;case"weeks":case"week":case"w":return r*Yc;case"days":case"day":case"d":return r*_e;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Me;case"minutes":case"minute":case"mins":case"min":case"m":return r*Pe;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ae;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function el(e){var t=Math.abs(e);return t>=_e?Math.round(e/_e)+"d":t>=Me?Math.round(e/Me)+"h":t>=Pe?Math.round(e/Pe)+"m":t>=Ae?Math.round(e/Ae)+"s":e+"ms"}function tl(e){var t=Math.abs(e);return t>=_e?bt(e,t,_e,"day"):t>=Me?bt(e,t,Me,"hour"):t>=Pe?bt(e,t,Pe,"minute"):t>=Ae?bt(e,t,Ae,"second"):e+" ms"}function bt(e,t,r,n){var s=t>=r*1.5;return Math.round(e/r)+" "+n+(s?"s":"")}});var _r=w((Zh,hs)=>{function rl(e){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=s,r.enabled=o,r.humanize=ds(),r.destroy=c,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,d=null,m,M;function H(...I){if(!H.enabled)return;let ne=H,we=Number(new Date),Gt=we-(f||we);ne.diff=Gt,ne.prev=f,ne.curr=we,f=we,I[0]=r.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let Te=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(Ne,Vt)=>{if(Ne==="%%")return"%";Te++;let Ze=r.formatters[Vt];if(typeof Ze=="function"){let Ht=I[Te];Ne=Ze.call(ne,Ht),I.splice(Te,1),Te--}return Ne}),r.formatArgs.call(ne,I),(ne.log||r.log).apply(ne,I)}return H.namespace=u,H.useColors=r.useColors(),H.color=r.selectColor(u),H.extend=n,H.destroy=r.destroy,Object.defineProperty(H,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(m!==r.namespaces&&(m=r.namespaces,M=r.enabled(u)),M),set:I=>{d=I}}),typeof r.init=="function"&&r.init(H),H}function n(u,f){let d=r(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,d=(typeof u=="string"?u:"").split(/[\s,]+/),m=d.length;for(f=0;f<m;f++)!d[f]||(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(u))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}hs.exports=rl});var ps=w((B,wt)=>{B.formatArgs=sl;B.save=il;B.load=ol;B.useColors=nl;B.storage=al();B.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();B.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function sl(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+wt.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),e.splice(n,0,t)}B.log=console.debug||console.log||(()=>{});function il(e){try{e?B.storage.setItem("debug",e):B.storage.removeItem("debug")}catch{}}function ol(){let e;try{e=B.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function al(){try{return localStorage}catch{}}wt.exports=_r()(B);var{formatters:ul}=wt.exports;ul.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var gs=w((P,kt)=>{var cl=require("tty"),Tt=require("util");P.init=gl;P.log=hl;P.formatArgs=fl;P.save=pl;P.load=ml;P.useColors=ll;P.destroy=Tt.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");P.colors=[6,2,3,4,5,1];try{let e=require("supports-color");e&&(e.stderr||e).level>=2&&(P.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}P.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function ll(){return"colors"in P.inspectOpts?Boolean(P.inspectOpts.colors):cl.isatty(process.stderr.fd)}function fl(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${t} \x1B[0m`;e[0]=i+e[0].split(`
`).join(`
`+i),e.push(s+"m+"+kt.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=dl()+t+" "+e[0]}function dl(){return P.inspectOpts.hideDate?"":new Date().toISOString()+" "}function hl(...e){return process.stderr.write(Tt.format(...e)+`
`)}function pl(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function ml(){return process.env.DEBUG}function gl(e){e.inspectOpts={};let t=Object.keys(P.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=P.inspectOpts[t[r]]}kt.exports=_r()(P);var{formatters:ms}=kt.exports;ms.o=function(e){return this.inspectOpts.colors=this.useColors,Tt.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};ms.O=function(e){return this.inspectOpts.colors=this.useColors,Tt.inspect(e,this.inspectOpts)}});var yr=w((ep,vr)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vr.exports=ps():vr.exports=gs()});var _s=w(U=>{"use strict";var _l=U&&U.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(U,"__esModule",{value:!0});var vl=require("fs"),yl=_l(yr()),Fe=yl.default("@kwsites/file-exists");function bl(e,t,r){Fe("checking %s",e);try{let n=vl.statSync(e);return n.isFile()&&t?(Fe("[OK] path represents a file"),!0):n.isDirectory()&&r?(Fe("[OK] path represents a directory"),!0):(Fe("[FAIL] path represents something other than a file or directory"),!1)}catch(n){if(n.code==="ENOENT")return Fe("[FAIL] path is not accessible: %o",n),!1;throw Fe("[FATAL] %o",n),n}}function wl(e,t=U.READABLE){return bl(e,(t&U.FILE)>0,(t&U.FOLDER)>0)}U.exists=wl;U.FILE=1;U.FOLDER=2;U.READABLE=U.FILE+U.FOLDER});var vs=w(Ot=>{"use strict";function Tl(e){for(var t in e)Ot.hasOwnProperty(t)||(Ot[t]=e[t])}Object.defineProperty(Ot,"__esModule",{value:!0});Tl(_s())});var wr=w(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.createDeferred=ve.deferred=void 0;function br(){let e,t,r="pending";return{promise:new Promise((s,i)=>{e=s,t=i}),done(s){r==="pending"&&(r="resolved",e(s))},fail(s){r==="pending"&&(r="rejected",t(s))},get fulfilled(){return r!=="pending"},get status(){return r}}}ve.deferred=br;ve.createDeferred=br;ve.default=br});var Ut=ke(lr(),1);var qt=ke(vs(),1),Mt=ke(yr(),1),Ii=require("child_process"),Oo=ke(wr(),1),qe=ke(wr(),1),Dt=Object.defineProperty,kl=Object.defineProperties,Ol=Object.getOwnPropertyDescriptor,Cl=Object.getOwnPropertyDescriptors,$r=Object.getOwnPropertyNames,ys=Object.getOwnPropertySymbols,Js=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable,bs=(e,t,r)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q=(e,t)=>{for(var r in t||(t={}))Js.call(t,r)&&bs(e,r,t[r]);if(ys)for(var r of ys(t))Sl.call(t,r)&&bs(e,r,t[r]);return e},Ge=(e,t)=>kl(e,Cl(t)),Rl=e=>Dt(e,"__esModule",{value:!0}),p=(e,t)=>function(){return e&&(t=(0,e[$r(e)[0]])(e=0)),t},El=(e,t)=>function(){return t||(0,e[$r(e)[0]])((t={exports:{}}).exports,t),t.exports},R=(e,t)=>{for(var r in t)Dt(e,r,{get:t[r],enumerable:!0})},xl=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $r(t))!Js.call(e,s)&&(r||s!=="default")&&Dt(e,s,{get:()=>t[s],enumerable:!(n=Ol(t,s))||n.enumerable});return e},S=(e=>(t,r)=>e&&e.get(t)||(r=xl(Rl({}),t,1),e&&e.set(t,r),r))(typeof WeakMap<"u"?new WeakMap:0),Ue=(e,t,r)=>new Promise((n,s)=>{var i=l=>{try{a(r.next(l))}catch(c){s(c)}},o=l=>{try{a(r.throw(l))}catch(c){s(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(i,o);a((r=r.apply(e,t)).next())}),ae,he=p({"src/lib/errors/git-error.ts"(){ae=class extends Error{constructor(e,t){super(t),this.task=e,Object.setPrototypeOf(this,new.target.prototype)}}}}),We,Ie=p({"src/lib/errors/git-response-error.ts"(){he(),We=class extends ae{constructor(e,t){super(void 0,t||String(e)),this.git=e}}}}),Qs,Ys=p({"src/lib/errors/task-configuration-error.ts"(){he(),Qs=class extends ae{constructor(e){super(void 0,e)}}}});function Xs(e){return typeof e=="function"?e:be}function Zs(e){return typeof e=="function"&&e!==be}function ei(e,t){let r=e.indexOf(t);return r<=0?[e,""]:[e.substr(0,r),e.substr(r+1)]}function ti(e,t=0){return ri(e)&&e.length>t?e[t]:void 0}function ye(e,t=0){if(ri(e)&&e.length>t)return e[e.length-1-t]}function ri(e){return!!(e&&typeof e.length=="number")}function Ke(e="",t=!0,r=`
`){return e.split(r).reduce((n,s)=>{let i=t?s.trim():s;return i&&n.push(i),n},[])}function jr(e,t){return Ke(e,!0).map(r=>t(r))}function Br(e){return(0,qt.exists)(e,qt.FOLDER)}function T(e,t){return Array.isArray(e)?e.includes(t)||e.push(t):e.add(t),t}function ni(e,t){return Array.isArray(e)&&!e.includes(t)&&e.push(t),e}function Ur(e,t){if(Array.isArray(e)){let r=e.indexOf(t);r>=0&&e.splice(r,1)}else e.delete(t);return t}function de(e){return Array.isArray(e)?e:[e]}function si(e){return de(e).map(String)}function C(e,t=0){if(e==null)return t;let r=parseInt(e,10);return isNaN(r)?t:r}function Ve(e,t){let r=[];for(let n=0,s=e.length;n<s;n++)r.push(t,e[n]);return r}function He(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function ii(e,t){return Object.assign({},...t.map(r=>r in e?{[r]:e[r]}:{}))}function Sr(e=0){return new Promise(t=>setTimeout(t,e))}var Le,be,Je,Lt=p({"src/lib/utils/util.ts"(){Le="\0",be=()=>{},Je=Object.prototype.toString.call.bind(Object.prototype.toString)}});function re(e,t,r){return t(e)?e:arguments.length>2?r:void 0}function Gr(e,t){return/number|string|boolean/.test(typeof e)&&(!t||!t.includes(typeof e))}function Vr(e){return!!e&&Je(e)==="[object Object]"}function oi(e){return typeof e=="function"}var Qe,D,ai,Pt,Hr,ui=p({"src/lib/utils/argument-filters.ts"(){Lt(),Qe=e=>Array.isArray(e),D=e=>typeof e=="string",ai=e=>Array.isArray(e)&&e.every(D),Pt=e=>D(e)||Array.isArray(e)&&e.every(D),Hr=e=>e==null||"number|boolean|function".includes(typeof e)?!1:Array.isArray(e)||typeof e=="string"||typeof e.length=="number"}}),Rr,Al=p({"src/lib/utils/exit-codes.ts"(){Rr=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR",e[e.NOT_FOUND=-2]="NOT_FOUND",e[e.UNCLEAN=128]="UNCLEAN",e))(Rr||{})}}),ze,Pl=p({"src/lib/utils/git-output-streams.ts"(){ze=class{constructor(e,t){this.stdOut=e,this.stdErr=t}asStrings(){return new ze(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}}),y,fe,Ml=p({"src/lib/utils/line-parser.ts"(){y=class{constructor(e,t){this.matches=[],this.parse=(r,n)=>(this.resetMatches(),this._regExp.every((s,i)=>this.addMatch(s,i,r(i)))?this.useMatches(n,this.prepareMatches())!==!1:!1),this._regExp=Array.isArray(e)?e:[e],t&&(this.useMatches=t)}useMatches(e,t){throw new Error("LineParser:useMatches not implemented")}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,r){let n=r&&e.exec(r);return n&&this.pushMatch(t,n),!!n}pushMatch(e,t){this.matches.push(...t.slice(1))}},fe=class extends y{addMatch(e,t,r){return/^remote:\s/.test(String(r))&&super.addMatch(e,t,r)}pushMatch(e,t){(e>0||t.length>1)&&super.pushMatch(e,t)}}}});function ci(...e){let t=process.cwd(),r=Object.assign(Q({baseDir:t},li),...e.filter(n=>typeof n=="object"&&n));return r.baseDir=r.baseDir||t,r.trimmed=r.trimmed===!0,r}var li,Fl=p({"src/lib/utils/simple-git-options.ts"(){li={binary:"git",maxConcurrentProcesses:5,config:[],trimmed:!1}}});function zr(e,t=[]){return Vr(e)?Object.keys(e).reduce((r,n)=>{let s=e[n];return Gr(s,["boolean"])?r.push(n+"="+s):r.push(n),r},t):t}function oe(e,t=0,r=!1){let n=[];for(let s=0,i=t<0?e.length:t;s<i;s++)"string|number".includes(typeof e[s])&&n.push(String(e[s]));return zr(Wr(e),n),r||n.push(...Dl(e)),n}function Dl(e){let t=typeof ye(e)=="function";return re(ye(e,t?1:0),Qe,[])}function Wr(e){let t=oi(ye(e));return re(ye(e,t?1:0),Vr)}function F(e,t=!0){let r=Xs(ye(e));return t||Zs(r)?r:void 0}var ql=p({"src/lib/utils/task-options.ts"(){ui(),Lt()}});function Er(e,t){return e(t.stdOut,t.stdErr)}function V(e,t,r,n=!0){return de(r).forEach(s=>{for(let i=Ke(s,n),o=0,a=i.length;o<a;o++){let l=(c=0)=>{if(!(o+c>=a))return i[o+c]};t.some(({parse:c})=>c(l,e))}}),e}var Ll=p({"src/lib/utils/task-parser.ts"(){Lt()}}),fi={};R(fi,{ExitCodes:()=>Rr,GitOutputStreams:()=>ze,LineParser:()=>y,NOOP:()=>be,NULL:()=>Le,RemoteLineParser:()=>fe,append:()=>T,appendTaskOptions:()=>zr,asArray:()=>de,asFunction:()=>Xs,asNumber:()=>C,asStringArray:()=>si,bufferToString:()=>He,callTaskParser:()=>Er,createInstanceConfig:()=>ci,delay:()=>Sr,filterArray:()=>Qe,filterFunction:()=>oi,filterHasLength:()=>Hr,filterPlainObject:()=>Vr,filterPrimitives:()=>Gr,filterString:()=>D,filterStringArray:()=>ai,filterStringOrStringArray:()=>Pt,filterType:()=>re,first:()=>ti,folderExists:()=>Br,forEachLineWithContent:()=>jr,getTrailingOptions:()=>oe,including:()=>ni,isUserFunction:()=>Zs,last:()=>ye,objectToString:()=>Je,parseStringResponse:()=>V,pick:()=>ii,prefixedArray:()=>Ve,remove:()=>Ur,splitOn:()=>ei,toLinesWithContent:()=>Ke,trailingFunctionArgument:()=>F,trailingOptionsArgument:()=>Wr});var b=p({"src/lib/utils/index.ts"(){ui(),Al(),Pl(),Ml(),Fl(),ql(),Ll(),Lt()}}),di={};R(di,{CheckRepoActions:()=>xr,checkIsBareRepoTask:()=>pi,checkIsRepoRootTask:()=>hi,checkIsRepoTask:()=>Il});function Il(e){switch(e){case"bare":return pi();case"root":return hi()}return{commands:["rev-parse","--is-inside-work-tree"],format:"utf-8",onError:It,parser:Kr}}function hi(){return{commands:["rev-parse","--git-dir"],format:"utf-8",onError:It,parser(t){return/^\.(git)?$/.test(t.trim())}}}function pi(){return{commands:["rev-parse","--is-bare-repository"],format:"utf-8",onError:It,parser:Kr}}function Nl(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var xr,It,Kr,mi=p({"src/lib/tasks/check-is-repo.ts"(){b(),xr=(e=>(e.BARE="bare",e.IN_TREE="tree",e.IS_REPO_ROOT="root",e))(xr||{}),It=({exitCode:e},t,r,n)=>{if(e===128&&Nl(t))return r(Buffer.from("false"));n(t)},Kr=e=>e.trim()==="true"}});function $l(e,t){let r=new gi(e),n=e?vi:_i;return Ke(t).forEach(s=>{let i=s.replace(n,"");r.paths.push(i),(yi.test(i)?r.folders:r.files).push(i)}),r}var gi,_i,vi,yi,jl=p({"src/lib/responses/CleanSummary.ts"(){b(),gi=class{constructor(e){this.dryRun=e,this.paths=[],this.files=[],this.folders=[]}},_i=/^[a-z]+\s*/i,vi=/^[a-z]+\s+[a-z]+\s*/i,yi=/\/$/}}),Ar={};R(Ar,{EMPTY_COMMANDS:()=>Nt,adhocExecTask:()=>bi,configurationErrorTask:()=>j,isBufferTask:()=>wi,isEmptyTask:()=>Ti,straightThroughBufferTask:()=>Bl,straightThroughStringTask:()=>Y});function bi(e){return{commands:Nt,format:"empty",parser:e}}function j(e){return{commands:Nt,format:"empty",parser(){throw typeof e=="string"?new Qs(e):e}}}function Y(e,t=!1){return{commands:e,format:"utf-8",parser(r){return t?String(r).trim():r}}}function Bl(e){return{commands:e,format:"buffer",parser(t){return t}}}function wi(e){return e.format==="buffer"}function Ti(e){return e.format==="empty"||!e.commands.length}var Nt,x=p({"src/lib/tasks/task.ts"(){Ys(),Nt=[]}}),ki={};R(ki,{CONFIG_ERROR_INTERACTIVE_MODE:()=>Jr,CONFIG_ERROR_MODE_REQUIRED:()=>Qr,CONFIG_ERROR_UNKNOWN_OPTION:()=>Yr,CleanOptions:()=>Rt,cleanTask:()=>Oi,cleanWithOptionsTask:()=>Ul,isCleanOptionsArray:()=>Gl});function Ul(e,t){let{cleanMode:r,options:n,valid:s}=Vl(e);return r?s.options?(n.push(...t),n.some(Wl)?j(Jr):Oi(r,n)):j(Yr+JSON.stringify(e)):j(Qr)}function Oi(e,t){return{commands:["clean",`-${e}`,...t],format:"utf-8",parser(n){return $l(e==="n",n)}}}function Gl(e){return Array.isArray(e)&&e.every(t=>Xr.has(t))}function Vl(e){let t,r=[],n={cleanMode:!1,options:!0};return e.replace(/[^a-z]i/g,"").split("").forEach(s=>{Hl(s)?(t=s,n.cleanMode=!0):n.options=n.options&&zl(r[r.length]=`-${s}`)}),{cleanMode:t,options:r,valid:n}}function Hl(e){return e==="f"||e==="n"}function zl(e){return/^-[a-z]$/i.test(e)&&Xr.has(e.charAt(1))}function Wl(e){return/^-[^\-]/.test(e)?e.indexOf("i")>0:e==="--interactive"}var Jr,Qr,Yr,Rt,Xr,Ci=p({"src/lib/tasks/clean.ts"(){jl(),b(),x(),Jr="Git clean interactive mode is not supported",Qr='Git clean mode parameter ("n" or "f") is required',Yr="Git clean unknown option found in: ",Rt=(e=>(e.DRY_RUN="n",e.FORCE="f",e.IGNORED_INCLUDED="x",e.IGNORED_ONLY="X",e.EXCLUDING="e",e.QUIET="q",e.RECURSIVE="d",e))(Rt||{}),Xr=new Set(["i",...si(Object.values(Rt))])}});function Kl(e){let t=new Ri;for(let r of Si(e))t.addValue(r.file,String(r.key),r.value);return t}function Jl(e,t){let r=null,n=[],s=new Map;for(let i of Si(e,t))i.key===t&&(n.push(r=i.value),s.has(i.file)||s.set(i.file,[]),s.get(i.file).push(r));return{key:t,paths:Array.from(s.keys()),scopes:s,value:r,values:n}}function Ql(e){return e.replace(/^(file):/,"")}function*Si(e,t=null){let r=e.split("\0");for(let n=0,s=r.length-1;n<s;){let i=Ql(r[n++]),o=r[n++],a=t;if(o.includes(`
`)){let l=ei(o,`
`);a=l[0],o=l[1]}yield{file:i,key:a,value:o}}}var Ri,Yl=p({"src/lib/responses/ConfigList.ts"(){b(),Ri=class{constructor(){this.files=[],this.values=Object.create(null)}get all(){return this._all||(this._all=this.files.reduce((e,t)=>Object.assign(e,this.values[t]),{})),this._all}addFile(e){if(!(e in this.values)){let t=ye(this.files);this.values[e]=t?Object.create(this.values[t]):{},this.files.push(e)}return this.values[e]}addValue(e,t,r){let n=this.addFile(e);n.hasOwnProperty(t)?Array.isArray(n[t])?n[t].push(r):n[t]=[n[t],r]:n[t]=r,this._all=void 0}}}});function Tr(e,t){return typeof e=="string"&&Pr.hasOwnProperty(e)?e:t}function Xl(e,t,r,n){let s=["config",`--${n}`];return r&&s.push("--add"),s.push(e,t),{commands:s,format:"utf-8",parser(i){return i}}}function Zl(e,t){let r=["config","--null","--show-origin","--get-all",e];return t&&r.splice(1,0,`--${t}`),{commands:r,format:"utf-8",parser(n){return Jl(n,e)}}}function ef(e){let t=["config","--list","--show-origin","--null"];return e&&t.push(`--${e}`),{commands:t,format:"utf-8",parser(r){return Kl(r)}}}function tf(){return{addConfig(e,t,...r){return this._runTask(Xl(e,t,r[0]===!0,Tr(r[1],"local")),F(arguments))},getConfig(e,t){return this._runTask(Zl(e,Tr(t,void 0)),F(arguments))},listConfig(...e){return this._runTask(ef(Tr(e[0],void 0)),F(arguments))}}}var Pr,Ei=p({"src/lib/tasks/config.ts"(){Yl(),b(),Pr=(e=>(e.system="system",e.global="global",e.local="local",e.worktree="worktree",e))(Pr||{})}});function rf(...e){return new Ai().param(...e)}function nf(e){let t=new Set,r={};return jr(e,n=>{let[s,i,o]=n.split(Le);t.add(s),(r[s]=r[s]||[]).push({line:C(i),path:s,preview:o})}),{paths:t,results:r}}function sf(){return{grep(e){let t=F(arguments),r=oe(arguments);for(let s of xi)if(r.includes(s))return this._runTask(j(`git.grep: use of "${s}" is not supported.`),t);typeof e=="string"&&(e=rf().param(e));let n=["grep","--null","-n","--full-name",...r,...e];return this._runTask({commands:n,format:"utf-8",parser(s){return nf(s)}},t)}}}var xi,Be,ws,Ai,Pi=p({"src/lib/tasks/grep.ts"(){b(),x(),xi=["-h"],Be=Symbol("grepQuery"),Ai=class{constructor(){this[ws]=[]}*[(ws=Be,Symbol.iterator)](){for(let e of this[Be])yield e}and(...e){return e.length&&this[Be].push("--and","(",...Ve(e,"-e"),")"),this}param(...e){return this[Be].push(...Ve(e,"-e")),this}}}}),Mi={};R(Mi,{ResetMode:()=>Et,getResetMode:()=>af,resetTask:()=>of});function of(e,t){let r=["reset"];return Fi(e)&&r.push(`--${e}`),r.push(...t),Y(r)}function af(e){if(Fi(e))return e;switch(typeof e){case"string":case"undefined":return"soft"}}function Fi(e){return Di.includes(e)}var Et,Di,qi=p({"src/lib/tasks/reset.ts"(){x(),Et=(e=>(e.MIXED="mixed",e.SOFT="soft",e.HARD="hard",e.MERGE="merge",e.KEEP="keep",e))(Et||{}),Di=Array.from(Object.values(Et))}});function uf(){return(0,Mt.default)("simple-git")}function Ts(e,t,r){return!t||!String(t).replace(/\s*/,"")?r?(n,...s)=>{e(n,...s),r(n,...s)}:e:(n,...s)=>{e(`%s ${n}`,t,...s),r&&r(n,...s)}}function cf(e,t,{namespace:r}){if(typeof e=="string")return e;let n=t&&t.namespace||"";return n.startsWith(r)?n.substr(r.length+1):n||r}function Zr(e,t,r,n=uf()){let s=e&&`[${e}]`||"",i=[],o=typeof t=="string"?n.extend(t):t,a=cf(re(t,D),o,n);return c(r);function l(u,f){return T(i,Zr(e,a.replace(/^[^:]+/,u),f,n))}function c(u){let f=u&&`[${u}]`||"",d=o&&Ts(o,f)||be,m=Ts(n,`${s} ${f}`,d);return Object.assign(o?d:m,{label:e,sibling:l,info:m,step:c})}}var Li=p({"src/lib/git-logger.ts"(){b(),Mt.default.formatters.L=e=>String(Hr(e)?e.length:"-"),Mt.default.formatters.B=e=>Buffer.isBuffer(e)?e.toString("utf8"):Je(e)}}),Ct,Mr,lf=p({"src/lib/runners/tasks-pending-queue.ts"(){he(),Li(),Ct=class{constructor(e="GitExecutor"){this.logLabel=e,this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){let t=Ct.getName(e.commands[0]),r=Zr(this.logLabel,t);return{task:e,logger:r,name:t}}push(e){let t=this.createProgress(e);return t.logger("Adding task to the queue, commands = %o",e.commands),this._queue.set(e,t),t}fatal(e){for(let[t,{logger:r}]of Array.from(this._queue.entries()))t===e.task?(r.info("Failed %o",e),r("Fatal exception, any as-yet un-started tasks run through this executor will not be attempted")):r.info("A fatal exception occurred in a previous task, the queue has been purged: %o",e.message),this.complete(t);if(this._queue.size!==0)throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}complete(e){this.withProgress(e)&&this._queue.delete(e)}attempt(e){let t=this.withProgress(e);if(!t)throw new ae(void 0,"TasksPendingQueue: attempt called for an unknown task");return t.logger("Starting task"),t}static getName(e="empty"){return`task:${e}:${++Ct.counter}`}},Mr=Ct,Mr.counter=0}});function De(e,t){return{method:ti(e.commands)||"",commands:t}}function ff(e,t){return r=>{t("[ERROR] child process exception %o",r),e.push(Buffer.from(String(r.stack),"ascii"))}}function ks(e,t,r,n){return s=>{r("%s received %L bytes",t,s),n("%B",s),e.push(s)}}var Fr,df=p({"src/lib/runners/git-executor-chain.ts"(){he(),x(),b(),lf(),Fr=class{constructor(e,t,r){this._executor=e,this._scheduler=t,this._plugins=r,this._chain=Promise.resolve(),this._queue=new Mr}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){return this._queue.push(e),this._chain=this._chain.then(()=>this.attemptTask(e))}attemptTask(e){return Ue(this,null,function*(){let t=yield this._scheduler.next(),r=()=>this._queue.complete(e);try{let{logger:n}=this._queue.attempt(e);return yield Ti(e)?this.attemptEmptyTask(e,n):this.attemptRemoteTask(e,n)}catch(n){throw this.onFatalException(e,n)}finally{r(),t()}})}onFatalException(e,t){let r=t instanceof ae?Object.assign(t,{task:e}):new ae(e,t&&String(t));return this._chain=Promise.resolve(),this._queue.fatal(r),r}attemptRemoteTask(e,t){return Ue(this,null,function*(){let r=this._plugins.exec("spawn.args",[...e.commands],De(e,e.commands)),n=yield this.gitResponse(e,this.binary,r,this.outputHandler,t.step("SPAWN")),s=yield this.handleTaskData(e,r,n,t.step("HANDLE"));return t("passing response to task's parser as a %s",e.format),wi(e)?Er(e.parser,s):Er(e.parser,s.asStrings())})}attemptEmptyTask(e,t){return Ue(this,null,function*(){return t("empty task bypassing child process to call to task's parser"),e.parser(this)})}handleTaskData(e,t,r,n){let{exitCode:s,rejection:i,stdOut:o,stdErr:a}=r;return new Promise((l,c)=>{n("Preparing to handle process response exitCode=%d stdOut=",s);let{error:u}=this._plugins.exec("task.error",{error:i},Q(Q({},De(e,t)),r));if(u&&e.onError)return n.info("exitCode=%s handling with custom error handler"),e.onError(r,u,f=>{n.info("custom error handler treated as success"),n("custom error returned a %s",Je(f)),l(new ze(Array.isArray(f)?Buffer.concat(f):f,Buffer.concat(a)))},c);if(u)return n.info("handling as error: exitCode=%s stdErr=%s rejection=%o",s,a.length,i),c(u);n.info("retrieving task output complete"),l(new ze(Buffer.concat(o),Buffer.concat(a)))})}gitResponse(e,t,r,n,s){return Ue(this,null,function*(){let i=s.sibling("output"),o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:!0},De(e,e.commands));return new Promise(a=>{let l=[],c=[];s.info("%s %o",t,r),s("%O",o);let u=this._beforeSpawn(e,r);if(u)return a({stdOut:l,stdErr:c,exitCode:9901,rejection:u});this._plugins.exec("spawn.before",void 0,Ge(Q({},De(e,r)),{kill(d){u=d||u}}));let f=(0,Ii.spawn)(t,r,o);f.stdout.on("data",ks(l,"stdOut",s,i.step("stdOut"))),f.stderr.on("data",ks(c,"stdErr",s,i.step("stdErr"))),f.on("error",ff(c,s)),n&&(s("Passing child process stdOut/stdErr to custom outputHandler"),n(t,f.stdout,f.stderr,[...r])),this._plugins.exec("spawn.after",void 0,Ge(Q({},De(e,r)),{spawned:f,close(d,m){a({stdOut:l,stdErr:c,exitCode:d,rejection:u||m})},kill(d){f.killed||(u=d,f.kill("SIGINT"))}}))})})}_beforeSpawn(e,t){let r;return this._plugins.exec("spawn.before",void 0,Ge(Q({},De(e,t)),{kill(n){r=n||r}})),r}}}}),Ni={};R(Ni,{GitExecutor:()=>$i});var $i,hf=p({"src/lib/runners/git-executor.ts"(){df(),$i=class{constructor(e="git",t,r,n){this.binary=e,this.cwd=t,this._scheduler=r,this._plugins=n,this._chain=new Fr(this,this._scheduler,this._plugins)}chain(){return new Fr(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function pf(e,t,r=be){let n=i=>{r(null,i)},s=i=>{(i==null?void 0:i.task)===e&&r(i instanceof We?mf(i):i,void 0)};t.then(n,s)}function mf(e){let t=n=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${n} should be GitResponseError.git.${n}, this will no longer be available in version 3`),t=be};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(r,{}));function r(n,s){return s in e||(n[s]={enumerable:!1,configurable:!1,get(){return t(s),e.git[s]}}),n}}var gf=p({"src/lib/task-callback.ts"(){Ie(),b()}});function Os(e,t){return bi(r=>{if(!Br(e))throw new Error(`Git.cwd: cannot change to non-directory "${e}"`);return(t||r).cwd=e})}var _f=p({"src/lib/tasks/change-working-directory.ts"(){b(),x()}});function vf(e){return V({author:null,branch:"",commit:"",root:!1,summary:{changes:0,insertions:0,deletions:0}},ji,e)}var ji,yf=p({"src/lib/parsers/parse-commit.ts"(){b(),ji=[new y(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,(e,[t,r,n])=>{e.branch=t,e.commit=n,e.root=!!r}),new y(/\s*Author:\s(.+)/i,(e,[t])=>{let r=t.split("<"),n=r.pop();!n||!n.includes("@")||(e.author={email:n.substr(0,n.length-1),name:r.join("<").trim()})}),new y(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0,e.summary.insertions=parseInt(r,10)||0,e.summary.deletions=parseInt(n,10)||0}),new y(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,(e,[t,r,n])=>{e.summary.changes=parseInt(t,10)||0;let s=parseInt(r,10)||0;n==="-"?e.summary.deletions=s:n==="+"&&(e.summary.insertions=s)})]}}),Bi={};R(Bi,{commitTask:()=>Ui,default:()=>Gi});function Ui(e,t,r){return{commands:["-c","core.abbrev=40","commit",...Ve(e,"-m"),...t,...r],format:"utf-8",parser:vf}}function Gi(){return{commit(t,...r){let n=F(arguments),s=e(t)||Ui(de(t),de(re(r[0],Pt,[])),[...re(r[1],Qe,[]),...oe(arguments,0,!0)]);return this._runTask(s,n)}};function e(t){return!Pt(t)&&j("git.commit: requires the commit message to be supplied as a string/string[]")}}var Vi=p({"src/lib/tasks/commit.ts"(){yf(),b(),x()}});function bf(e,t){let r=["hash-object",e];return t&&r.push("-w"),Y(r,!0)}var wf=p({"src/lib/tasks/hash-object.ts"(){x()}});function Tf(e,t,r){let n=String(r).trim(),s;if(s=Hi.exec(n))return new xt(e,t,!1,s[1]);if(s=zi.exec(n))return new xt(e,t,!0,s[1]);let i="",o=n.split(" ");for(;o.length;)if(o.shift()==="in"){i=o.join(" ");break}return new xt(e,t,/^re/i.test(n),i)}var xt,Hi,zi,kf=p({"src/lib/responses/InitSummary.ts"(){xt=class{constructor(e,t,r,n){this.bare=e,this.path=t,this.existing=r,this.gitDir=n}},Hi=/^Init.+ repository in (.+)$/,zi=/^Rein.+ in (.+)$/}});function Of(e){return e.includes(en)}function Cf(e=!1,t,r){let n=["init",...r];return e&&!Of(n)&&n.splice(1,0,en),{commands:n,format:"utf-8",parser(s){return Tf(n.includes("--bare"),t,s)}}}var en,Sf=p({"src/lib/tasks/init.ts"(){kf(),en="--bare"}});function tn(e){for(let t=0;t<e.length;t++){let r=rn.exec(e[t]);if(r)return`--${r[1]}`}return""}function Rf(e){return rn.test(e)}var rn,Ye=p({"src/lib/args/log-format.ts"(){rn=/^--(stat|numstat|name-only|name-status)(=|$)/}}),Wi,Ef=p({"src/lib/responses/DiffSummary.ts"(){Wi=class{constructor(){this.changed=0,this.deletions=0,this.insertions=0,this.files=[]}}}});function Ki(e=""){let t=Ji[e];return r=>V(new Wi,t,r,!1)}var kr,Cs,Ss,Rs,Ji,Qi=p({"src/lib/parsers/parse-diff-summary.ts"(){Ye(),Ef(),b(),kr=[new y(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,(e,[t,r,n=""])=>{e.files.push({file:t.trim(),changes:C(r),insertions:n.replace(/[^+]/g,"").length,deletions:n.replace(/[^-]/g,"").length,binary:!1})}),new y(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,(e,[t,r,n])=>{e.files.push({file:t.trim(),before:C(r),after:C(n),binary:!0})}),new y(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,(e,[t,r])=>{let n=/(\d+) i/.exec(r),s=/(\d+) d/.exec(r);e.changed=C(t),e.insertions=C(n==null?void 0:n[1]),e.deletions=C(s==null?void 0:s[1])})],Cs=[new y(/(\d+)\t(\d+)\t(.+)$/,(e,[t,r,n])=>{let s=C(t),i=C(r);e.changed++,e.insertions+=s,e.deletions+=i,e.files.push({file:n,changes:s+i,insertions:s,deletions:i,binary:!1})}),new y(/-\t-\t(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,after:0,before:0,binary:!0})})],Ss=[new y(/(.+)$/,(e,[t])=>{e.changed++,e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:!1})})],Rs=[new y(/([ACDMRTUXB])\s*(.+)$/,(e,[t,r])=>{e.changed++,e.files.push({file:r,changes:0,insertions:0,deletions:0,binary:!1})})],Ji={[""]:kr,["--stat"]:kr,["--numstat"]:Cs,["--name-status"]:Rs,["--name-only"]:Ss}}});function xf(e,t){return t.reduce((r,n,s)=>(r[n]=e[s]||"",r),Object.create({diff:null}))}function Yi(e=on,t=Xi,r=""){let n=Ki(r);return function(s){let i=Ke(s,!0,nn).map(function(o){let a=o.trim().split(sn),l=xf(a[0].trim().split(e),t);return a.length>1&&!!a[1].trim()&&(l.diff=n(a[1])),l});return{all:i,latest:i.length&&i[0]||null,total:i.length}}}var nn,sn,on,Xi,Zi=p({"src/lib/parsers/parse-list-log-summary.ts"(){b(),Qi(),Ye(),nn="\xF2\xF2\xF2\xF2\xF2\xF2 ",sn=" \xF2\xF2",on=" \xF2 ",Xi=["hash","date","message","refs","author_name","author_email"]}}),eo={};R(eo,{diffSummaryTask:()=>Af,validateLogFormatConfig:()=>$t});function Af(e){let t=tn(e),r=["diff"];return t===""&&(t="--stat",r.push("--stat=4096")),r.push(...e),$t(r)||{commands:r,format:"utf-8",parser:Ki(t)}}function $t(e){let t=e.filter(Rf);if(t.length>1)return j(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`);if(t.length&&e.includes("-z"))return j(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}var an=p({"src/lib/tasks/diff.ts"(){Ye(),Qi(),x()}});function Pf(e,t){let r=[],n=[];return Object.keys(e).forEach(s=>{r.push(s),n.push(String(e[s]))}),[r,n.join(t)]}function Mf(e){return Object.keys(e).reduce((t,r)=>(r in Dr||(t[r]=e[r]),t),{})}function to(e={},t=[]){let r=re(e.splitter,D,on),n=!Gr(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===!1?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==!1?"%aN":"%an",author_email:e.mailMap!==!1?"%aE":"%ae"},[s,i]=Pf(n,r),o=[],a=[`--pretty=format:${nn}${i}${sn}`,...t],l=e.n||e["max-count"]||e.maxCount;if(l&&a.push(`--max-count=${l}`),e.from||e.to){let c=e.symmetric!==!1?"...":"..";o.push(`${e.from||""}${c}${e.to||""}`)}return D(e.file)&&o.push("--follow",e.file),zr(Mf(e),a),{fields:s,splitter:r,commands:[...a,...o]}}function Ff(e,t,r){let n=Yi(e,t,tn(r));return{commands:["log",...r],format:"utf-8",parser:n}}function Df(){return{log(...r){let n=F(arguments),s=to(Wr(arguments),re(arguments[0],Qe)),i=t(...r)||$t(s.commands)||e(s);return this._runTask(i,n)}};function e(r){return Ff(r.splitter,r.fields,r.commands)}function t(r,n){return D(r)&&D(n)&&j("git.log(string, string) should be replaced with git.log({ from: string, to: string })")}}var Dr,ro=p({"src/lib/tasks/log.ts"(){Ye(),Zi(),b(),x(),an(),Dr=(e=>(e[e["--pretty"]=0]="--pretty",e[e["max-count"]=1]="max-count",e[e.maxCount=2]="maxCount",e[e.n=3]="n",e[e.file=4]="file",e[e.format=5]="format",e[e.from=6]="from",e[e.to=7]="to",e[e.splitter=8]="splitter",e[e.symmetric=9]="symmetric",e[e.mailMap=10]="mailMap",e[e.multiLine=11]="multiLine",e[e.strictDate=12]="strictDate",e))(Dr||{})}}),At,no,qf=p({"src/lib/responses/MergeSummary.ts"(){At=class{constructor(e,t=null,r){this.reason=e,this.file=t,this.meta=r}toString(){return`${this.file}:${this.reason}`}},no=class{constructor(){this.conflicts=[],this.merges=[],this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){return this.conflicts.length?`CONFLICTS: ${this.conflicts.join(", ")}`:"OK"}}}}),qr,so,Lf=p({"src/lib/responses/PullSummary.ts"(){qr=class{constructor(){this.remoteMessages={all:[]},this.created=[],this.deleted=[],this.files=[],this.deletions={},this.insertions={},this.summary={changes:0,deletions:0,insertions:0}}},so=class{constructor(){this.remote="",this.hash={local:"",remote:""},this.branch={local:"",remote:""},this.message=""}toString(){return this.message}}}});function Or(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function Es(e){let t=/^\s*(\d+)/.exec(e),r=/delta (\d+)/i.exec(e);return{count:C(t&&t[1]||"0"),delta:C(r&&r[1]||"0")}}var io,If=p({"src/lib/parsers/parse-remote-objects.ts"(){b(),io=[new fe(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,(e,[t,r])=>{let n=t.toLowerCase(),s=Or(e.remoteMessages);Object.assign(s,{[n]:C(r)})}),new fe(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,(e,[t,r])=>{let n=t.toLowerCase(),s=Or(e.remoteMessages);Object.assign(s,{[n]:C(r)})}),new fe(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,(e,[t,r,n])=>{let s=Or(e.remoteMessages);s.total=Es(t),s.reused=Es(r),s.packReused=C(n)})]}});function oo(e,t){return V({remoteMessages:new uo},ao,t)}var ao,uo,co=p({"src/lib/parsers/parse-remote-messages.ts"(){b(),If(),ao=[new fe(/^remote:\s*(.+)$/,(e,[t])=>(e.remoteMessages.all.push(t.trim()),!1)),...io,new fe([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],(e,[t])=>{e.remoteMessages.pullRequestUrl=t}),new fe([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],(e,[t,r,n])=>{e.remoteMessages.vulnerabilities={count:C(t),summary:r,url:n}})],uo=class{constructor(){this.all=[]}}}});function Nf(e,t){let r=V(new so,lo,[e,t]);return r.message&&r}var xs,As,Ps,Ms,lo,Fs,un,fo=p({"src/lib/parsers/parse-pull.ts"(){Lf(),b(),co(),xs=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/,As=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/,Ps=/^(create|delete) mode \d+ (.+)/,Ms=[new y(xs,(e,[t,r,n])=>{e.files.push(t),r&&(e.insertions[t]=r.length),n&&(e.deletions[t]=n.length)}),new y(As,(e,[t,,r,,n])=>r!==void 0||n!==void 0?(e.summary.changes=+t||0,e.summary.insertions=+r||0,e.summary.deletions=+n||0,!0):!1),new y(Ps,(e,[t,r])=>{T(e.files,r),T(t==="create"?e.created:e.deleted,r)})],lo=[new y(/^from\s(.+)$/i,(e,[t])=>void(e.remote=t)),new y(/^fatal:\s(.+)$/,(e,[t])=>void(e.message=t)),new y(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,(e,[t,r,n,s])=>{e.branch.local=n,e.hash.local=t,e.branch.remote=s,e.hash.remote=r})],Fs=(e,t)=>V(new qr,Ms,[e,t]),un=(e,t)=>Object.assign(new qr,Fs(e,t),oo(e,t))}}),Ds,ho,qs,$f=p({"src/lib/parsers/parse-merge.ts"(){qf(),b(),fo(),Ds=[new y(/^Auto-merging\s+(.+)$/,(e,[t])=>{e.merges.push(t)}),new y(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,(e,[t,r])=>{e.conflicts.push(new At(t,r))}),new y(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,(e,[t,r,n])=>{e.conflicts.push(new At(t,r,{deleteRef:n}))}),new y(/^CONFLICT\s+\((.+)\):/,(e,[t])=>{e.conflicts.push(new At(t,null))}),new y(/^Automatic merge failed;\s+(.+)$/,(e,[t])=>{e.result=t})],ho=(e,t)=>Object.assign(qs(e,t),un(e,t)),qs=e=>V(new no,Ds,e)}});function Ls(e){return e.length?{commands:["merge",...e],format:"utf-8",parser(t,r){let n=ho(t,r);if(n.failed)throw new We(n);return n}}:j("Git.merge requires at least one option")}var jf=p({"src/lib/tasks/merge.ts"(){Ie(),$f(),x()}});function Bf(e,t,r){let n=r.includes("deleted"),s=r.includes("tag")||/^refs\/tags/.test(e),i=!r.includes("new");return{deleted:n,tag:s,branch:!s,new:!i,alreadyUpdated:i,local:e,remote:t}}var Is,po,Ns,Uf=p({"src/lib/parsers/parse-push.ts"(){b(),co(),Is=[new y(/^Pushing to (.+)$/,(e,[t])=>{e.repo=t}),new y(/^updating local tracking ref '(.+)'/,(e,[t])=>{e.ref=Ge(Q({},e.ref||{}),{local:t})}),new y(/^[*-=]\s+([^:]+):(\S+)\s+\[(.+)]$/,(e,[t,r,n])=>{e.pushed.push(Bf(t,r,n))}),new y(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,(e,[t,r,n])=>{e.branch=Ge(Q({},e.branch||{}),{local:t,remote:r,remoteName:n})}),new y(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,(e,[t,r,n,s])=>{e.update={head:{local:t,remote:r},hash:{from:n,to:s}}})],po=(e,t)=>{let r=Ns(e,t),n=oo(e,t);return Q(Q({},r),n)},Ns=(e,t)=>V({pushed:[]},Is,[e,t])}}),mo={};R(mo,{pushTagsTask:()=>Gf,pushTask:()=>cn});function Gf(e={},t){return T(t,"--tags"),cn(e,t)}function cn(e={},t){let r=["push",...t];return e.branch&&r.splice(1,0,e.branch),e.remote&&r.splice(1,0,e.remote),Ur(r,"-v"),T(r,"--verbose"),T(r,"--porcelain"),{commands:r,format:"utf-8",parser:po}}var go=p({"src/lib/tasks/push.ts"(){Uf(),b()}}),$s,_o,Vf=p({"src/lib/responses/FileStatusSummary.ts"(){$s=/^(.+) -> (.+)$/,_o=class{constructor(e,t,r){if(this.path=e,this.index=t,this.working_dir=r,t+r==="R"){let n=$s.exec(e)||[null,e,e];this.from=n[1]||"",this.path=n[2]||""}}}}});function js(e){let[t,r]=e.split(Le);return{from:r||t,to:t}}function G(e,t,r){return[`${e}${t}`,r]}function Cr(e,...t){return t.map(r=>G(e,r,(n,s)=>T(n.conflicted,s)))}function Hf(e,t){let r=t.trim();switch(" "){case r.charAt(2):return n(r.charAt(0),r.charAt(1),r.substr(3));case r.charAt(1):return n(" ",r.charAt(0),r.substr(2));default:return}function n(s,i,o){let a=`${s}${i}`,l=vo.get(a);l&&l(e,o),a!=="##"&&a!=="!!"&&e.files.push(new _o(o.replace(/\0.+$/,""),s,i))}}var Bs,vo,yo,zf=p({"src/lib/responses/StatusSummary.ts"(){b(),Vf(),Bs=class{constructor(){this.not_added=[],this.conflicted=[],this.created=[],this.deleted=[],this.ignored=void 0,this.modified=[],this.renamed=[],this.files=[],this.staged=[],this.ahead=0,this.behind=0,this.current=null,this.tracking=null,this.detached=!1,this.isClean=()=>!this.files.length}},vo=new Map([G(" ","A",(e,t)=>T(e.created,t)),G(" ","D",(e,t)=>T(e.deleted,t)),G(" ","M",(e,t)=>T(e.modified,t)),G("A"," ",(e,t)=>T(e.created,t)&&T(e.staged,t)),G("A","M",(e,t)=>T(e.created,t)&&T(e.staged,t)&&T(e.modified,t)),G("D"," ",(e,t)=>T(e.deleted,t)&&T(e.staged,t)),G("M"," ",(e,t)=>T(e.modified,t)&&T(e.staged,t)),G("M","M",(e,t)=>T(e.modified,t)&&T(e.staged,t)),G("R"," ",(e,t)=>{T(e.renamed,js(t))}),G("R","M",(e,t)=>{let r=js(t);T(e.renamed,r),T(e.modified,r.to)}),G("!","!",(e,t)=>{T(e.ignored=e.ignored||[],t)}),G("?","?",(e,t)=>T(e.not_added,t)),...Cr("A","A","U"),...Cr("D","D","U"),...Cr("U","A","D","U"),["##",(e,t)=>{let r=/ahead (\d+)/,n=/behind (\d+)/,s=/^(.+?(?=(?:\.{3}|\s|$)))/,i=/\.{3}(\S*)/,o=/\son\s([\S]+)$/,a;a=r.exec(t),e.ahead=a&&+a[1]||0,a=n.exec(t),e.behind=a&&+a[1]||0,a=s.exec(t),e.current=a&&a[1],a=i.exec(t),e.tracking=a&&a[1],a=o.exec(t),e.current=a&&a[1]||e.current,e.detached=/\(no branch\)/.test(t)}]]),yo=function(e){let t=e.split(Le),r=new Bs;for(let n=0,s=t.length;n<s;){let i=t[n++].trim();!i||(i.charAt(0)==="R"&&(i+=Le+(t[n++]||"")),Hf(r,i))}return r}}});function Wf(e){let t=["status","--porcelain","-b","-u","--null",...e.filter(r=>!bo.includes(r))];return{format:"utf-8",commands:t,parser(r){return yo(r)}}}var bo,Kf=p({"src/lib/tasks/status.ts"(){zf(),bo=["--null","-z"]}});function Ft(e=0,t=0,r=0,n="",s=!0){return Object.defineProperty({major:e,minor:t,patch:r,agent:n,installed:s},"toString",{value(){return`${this.major}.${this.minor}.${this.patch}`},configurable:!1,enumerable:!1})}function Jf(){return Ft(0,0,0,"",!1)}function Qf(){return{version(){return this._runTask({commands:["--version"],format:"utf-8",parser:Yf,onError(e,t,r,n){if(e.exitCode===-2)return r(Buffer.from(ln));n(t)}})}}}function Yf(e){return e===ln?Jf():V(Ft(0,0,0,e),wo,e)}var ln,wo,Xf=p({"src/lib/tasks/version.ts"(){b(),ln="installed=false",wo=[new y(/version (\d+)\.(\d+)\.(\d+)(?:\s*\((.+)\))?/,(e,[t,r,n,s=""])=>{Object.assign(e,Ft(C(t),C(r),C(n),s))}),new y(/version (\d+)\.(\d+)\.(\D+)(.+)?$/,(e,[t,r,n,s=""])=>{Object.assign(e,Ft(C(t),C(r),n,s))})]}}),To={};R(To,{SimpleGitApi:()=>Lr});var Lr,Zf=p({"src/lib/simple-git-api.ts"(){gf(),_f(),Vi(),Ei(),Pi(),wf(),Sf(),ro(),jf(),go(),Kf(),x(),Xf(),b(),Lr=class{constructor(e){this._executor=e}_runTask(e,t){let r=this._executor.chain(),n=r.push(e);return t&&pf(e,n,t),Object.create(this,{then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},_executor:{value:r}})}add(e){return this._runTask(Y(["add",...de(e)]),F(arguments))}cwd(e){let t=F(arguments);return typeof e=="string"?this._runTask(Os(e,this._executor),t):typeof(e==null?void 0:e.path)=="string"?this._runTask(Os(e.path,e.root&&this._executor||void 0),t):this._runTask(j("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(bf(e,t===!0),F(arguments))}init(e){return this._runTask(Cf(e===!0,this._executor.cwd,oe(arguments)),F(arguments))}merge(){return this._runTask(Ls(oe(arguments)),F(arguments))}mergeFromTo(e,t){return D(e)&&D(t)?this._runTask(Ls([e,t,...oe(arguments)]),F(arguments,!1)):this._runTask(j("Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings"))}outputHandler(e){return this._executor.outputHandler=e,this}push(){let e=cn({remote:re(arguments[0],D),branch:re(arguments[1],D)},oe(arguments));return this._runTask(e,F(arguments))}stash(){return this._runTask(Y(["stash",...oe(arguments)]),F(arguments))}status(){return this._runTask(Wf(oe(arguments)),F(arguments))}},Object.assign(Lr.prototype,Gi(),tf(),sf(),Df(),Qf())}}),ko={};R(ko,{Scheduler:()=>Co});var Us,Co,ed=p({"src/lib/runners/scheduler.ts"(){b(),Li(),Us=(()=>{let e=0;return()=>{e++;let{promise:t,done:r}=(0,Oo.createDeferred)();return{promise:t,done:r,id:e}}})(),Co=class{constructor(e=2){this.concurrency=e,this.logger=Zr("","scheduler"),this.pending=[],this.running=[],this.logger("Constructed, concurrency=%s",e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger("Schedule attempt ignored, pending=%s running=%s concurrency=%s",this.pending.length,this.running.length,this.concurrency);return}let e=T(this.running,this.pending.shift());this.logger("Attempting id=%s",e.id),e.done(()=>{this.logger("Completing id=",e.id),Ur(this.running,e),this.schedule()})}next(){let{promise:e,id:t}=T(this.pending,Us());return this.logger("Scheduling id=%s",t),this.schedule(),e}}}}),So={};R(So,{applyPatchTask:()=>td});function td(e,t){return Y(["apply",...t,...e])}var rd=p({"src/lib/tasks/apply-patch.ts"(){x()}});function nd(e,t){return{branch:e,hash:t,success:!0}}function sd(e){return{branch:e,hash:null,success:!1}}var Ro,id=p({"src/lib/responses/BranchDeleteSummary.ts"(){Ro=class{constructor(){this.all=[],this.branches={},this.errors=[]}get success(){return!this.errors.length}}}});function Eo(e,t){return t===1&&Ir.test(e)}var Gs,Ir,Vs,jt,od=p({"src/lib/parsers/parse-branch-delete.ts"(){id(),b(),Gs=/(\S+)\s+\(\S+\s([^)]+)\)/,Ir=/^error[^']+'([^']+)'/m,Vs=[new y(Gs,(e,[t,r])=>{let n=nd(t,r);e.all.push(n),e.branches[t]=n}),new y(Ir,(e,[t])=>{let r=sd(t);e.errors.push(r),e.all.push(r),e.branches[t]=r})],jt=(e,t)=>V(new Ro,Vs,[e,t])}}),xo,ad=p({"src/lib/responses/BranchSummary.ts"(){xo=class{constructor(){this.all=[],this.branches={},this.current="",this.detached=!1}push(e,t,r,n,s){e==="*"&&(this.detached=t,this.current=r),this.all.push(r),this.branches[r]={current:e==="*",linkedWorkTree:e==="+",name:r,commit:n,label:s}}}}});function Hs(e){return e?e.charAt(0):""}function Ao(e){return V(new xo,Po,e)}var Po,ud=p({"src/lib/parsers/parse-branch.ts"(){ad(),b(),Po=[new y(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,(e,[t,r,n,s])=>{e.push(Hs(t),!0,r,n,s)}),new y(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,(e,[t,r,n,s])=>{e.push(Hs(t),!1,r,n,s)})]}}),Mo={};R(Mo,{branchLocalTask:()=>ld,branchTask:()=>cd,containsDeleteBranchCommand:()=>Fo,deleteBranchTask:()=>dd,deleteBranchesTask:()=>fd});function Fo(e){let t=["-d","-D","--delete"];return e.some(r=>t.includes(r))}function cd(e){let t=Fo(e),r=["branch",...e];return r.length===1&&r.push("-a"),r.includes("-v")||r.splice(1,0,"-v"),{format:"utf-8",commands:r,parser(n,s){return t?jt(n,s).all[0]:Ao(n)}}}function ld(){return{format:"utf-8",commands:["branch","-v"],parser:Ao}}function fd(e,t=!1){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(r,n){return jt(r,n)},onError({exitCode:r,stdOut:n},s,i,o){if(!Eo(String(s),r))return o(s);i(n)}}}function dd(e,t=!1){let r={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(n,s){return jt(n,s).branches[e]},onError({exitCode:n,stdErr:s,stdOut:i},o,a,l){if(!Eo(String(o),n))return l(o);throw new We(r.parser(He(i),He(s)),String(o))}};return r}var hd=p({"src/lib/tasks/branch.ts"(){Ie(),od(),ud(),b()}}),Do,pd=p({"src/lib/responses/CheckIgnore.ts"(){Do=e=>e.split(/\n/g).map(t=>t.trim()).filter(t=>!!t)}}),qo={};R(qo,{checkIgnoreTask:()=>md});function md(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Do}}var gd=p({"src/lib/tasks/check-ignore.ts"(){pd()}}),Lo={};R(Lo,{cloneMirrorTask:()=>vd,cloneTask:()=>Io});function _d(e){return/^--upload-pack(=|$)/.test(e)}function Io(e,t,r){let n=["clone",...r];return D(e)&&n.push(e),D(t)&&n.push(t),n.find(_d)?j("git.fetch: potential exploit argument blocked."):Y(n)}function vd(e,t,r){return T(r,"--mirror"),Io(e,t,r)}var yd=p({"src/lib/tasks/clone.ts"(){x(),b()}});function bd(e,t){return V({raw:e,remote:null,branches:[],tags:[],updated:[],deleted:[]},No,[e,t])}var No,wd=p({"src/lib/parsers/parse-fetch.ts"(){b(),No=[new y(/From (.+)$/,(e,[t])=>{e.remote=t}),new y(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.branches.push({name:t,tracking:r})}),new y(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,(e,[t,r])=>{e.tags.push({name:t,tracking:r})}),new y(/- \[deleted]\s+\S+\s*-> (.+)$/,(e,[t])=>{e.deleted.push({tracking:t})}),new y(/\s*([^.]+)\.\.(\S+)\s+(\S+)\s*-> (.+)$/,(e,[t,r,n,s])=>{e.updated.push({name:n,tracking:s,to:r,from:t})})]}}),$o={};R($o,{fetchTask:()=>kd});function Td(e){return/^--upload-pack(=|$)/.test(e)}function kd(e,t,r){let n=["fetch",...r];return e&&t&&n.push(e,t),n.find(Td)?j("git.fetch: potential exploit argument blocked."):{commands:n,format:"utf-8",parser:bd}}var Od=p({"src/lib/tasks/fetch.ts"(){wd(),x()}});function Cd(e){return V({moves:[]},jo,e)}var jo,Sd=p({"src/lib/parsers/parse-move.ts"(){b(),jo=[new y(/^Renaming (.+) to (.+)$/,(e,[t,r])=>{e.moves.push({from:t,to:r})})]}}),Bo={};R(Bo,{moveTask:()=>Rd});function Rd(e,t){return{commands:["mv","-v",...de(e),t],format:"utf-8",parser:Cd}}var Ed=p({"src/lib/tasks/move.ts"(){Sd(),b()}}),Uo={};R(Uo,{pullTask:()=>xd});function xd(e,t,r){let n=["pull",...r];return e&&t&&n.splice(1,0,e,t),{commands:n,format:"utf-8",parser(s,i){return un(s,i)},onError(s,i,o,a){let l=Nf(He(s.stdOut),He(s.stdErr));if(l)return a(new We(l));a(i)}}}var Ad=p({"src/lib/tasks/pull.ts"(){Ie(),fo(),b()}});function Pd(e){let t={};return Go(e,([r])=>t[r]={name:r}),Object.values(t)}function Md(e){let t={};return Go(e,([r,n,s])=>{t.hasOwnProperty(r)||(t[r]={name:r,refs:{fetch:"",push:""}}),s&&n&&(t[r].refs[s.replace(/[^a-z]/g,"")]=n)}),Object.values(t)}function Go(e,t){jr(e,r=>t(r.split(/\s+/)))}var Fd=p({"src/lib/responses/GetRemoteSummary.ts"(){b()}}),Vo={};R(Vo,{addRemoteTask:()=>Dd,getRemotesTask:()=>qd,listRemotesTask:()=>Ld,remoteTask:()=>Id,removeRemoteTask:()=>Nd});function Dd(e,t,r=[]){return Y(["remote","add",...r,e,t])}function qd(e){let t=["remote"];return e&&t.push("-v"),{commands:t,format:"utf-8",parser:e?Md:Pd}}function Ld(e=[]){let t=[...e];return t[0]!=="ls-remote"&&t.unshift("ls-remote"),Y(t)}function Id(e=[]){let t=[...e];return t[0]!=="remote"&&t.unshift("remote"),Y(t)}function Nd(e){return Y(["remote","remove",e])}var $d=p({"src/lib/tasks/remote.ts"(){Fd(),x()}}),Ho={};R(Ho,{stashListTask:()=>jd});function jd(e={},t){let r=to(e),n=["stash","list",...r.commands,...t],s=Yi(r.splitter,r.fields,tn(n));return $t(n)||{commands:n,format:"utf-8",parser:s}}var Bd=p({"src/lib/tasks/stash-list.ts"(){Ye(),Zi(),an(),ro()}}),zo={};R(zo,{addSubModuleTask:()=>Ud,initSubModuleTask:()=>Gd,subModuleTask:()=>Bt,updateSubModuleTask:()=>Vd});function Ud(e,t){return Bt(["add",e,t])}function Gd(e){return Bt(["init",...e])}function Bt(e){let t=[...e];return t[0]!=="submodule"&&t.unshift("submodule"),Y(t)}function Vd(e){return Bt(["update",...e])}var Hd=p({"src/lib/tasks/sub-module.ts"(){x()}});function zd(e,t){let r=isNaN(e),n=isNaN(t);return r!==n?r?1:-1:r?Wo(e,t):0}function Wo(e,t){return e===t?0:e>t?1:-1}function Wd(e){return e.trim()}function St(e){return typeof e=="string"&&parseInt(e.replace(/^\D+/g,""),10)||0}var zs,Ko,Kd=p({"src/lib/responses/TagList.ts"(){zs=class{constructor(e,t){this.all=e,this.latest=t}},Ko=function(e,t=!1){let r=e.split(`
`).map(Wd).filter(Boolean);t||r.sort(function(s,i){let o=s.split("."),a=i.split(".");if(o.length===1||a.length===1)return zd(St(o[0]),St(a[0]));for(let l=0,c=Math.max(o.length,a.length);l<c;l++){let u=Wo(St(o[l]),St(a[l]));if(u)return u}return 0});let n=t?r[0]:[...r].reverse().find(s=>s.indexOf(".")>=0);return new zs(r,n)}}}),Jo={};R(Jo,{addAnnotatedTagTask:()=>Yd,addTagTask:()=>Qd,tagListTask:()=>Jd});function Jd(e=[]){let t=e.some(r=>/^--sort=/.test(r));return{format:"utf-8",commands:["tag","-l",...e],parser(r){return Ko(r,t)}}}function Qd(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function Yd(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var Xd=p({"src/lib/tasks/tag.ts"(){Kd()}}),Zd=El({"src/git.js"(e,t){var{GitExecutor:r}=(hf(),S(Ni)),{SimpleGitApi:n}=(Zf(),S(To)),{Scheduler:s}=(ed(),S(ko)),{configurationErrorTask:i}=(x(),S(Ar)),{asArray:o,filterArray:a,filterPrimitives:l,filterString:c,filterStringOrStringArray:u,filterType:f,getTrailingOptions:d,trailingFunctionArgument:m,trailingOptionsArgument:M}=(b(),S(fi)),{applyPatchTask:H}=(rd(),S(So)),{branchTask:I,branchLocalTask:ne,deleteBranchesTask:we,deleteBranchTask:Gt}=(hd(),S(Mo)),{checkIgnoreTask:Te}=(gd(),S(qo)),{checkIsRepoTask:hn}=(mi(),S(di)),{cloneTask:Ne,cloneMirrorTask:Vt}=(yd(),S(Lo)),{cleanWithOptionsTask:Ze,isCleanOptionsArray:Ht}=(Ci(),S(ki)),{commitTask:wh}=(Vi(),S(Bi)),{diffSummaryTask:aa}=(an(),S(eo)),{fetchTask:ua}=(Od(),S($o)),{moveTask:ca}=(Ed(),S(Bo)),{pullTask:la}=(Ad(),S(Uo)),{pushTagsTask:fa}=(go(),S(mo)),{addRemoteTask:da,getRemotesTask:ha,listRemotesTask:pa,remoteTask:ma,removeRemoteTask:ga}=($d(),S(Vo)),{getResetMode:_a,resetTask:va}=(qi(),S(Mi)),{stashListTask:ya}=(Bd(),S(Ho)),{addSubModuleTask:ba,initSubModuleTask:wa,subModuleTask:Ta,updateSubModuleTask:ka}=(Hd(),S(zo)),{addAnnotatedTagTask:Oa,addTagTask:Ca,tagListTask:Sa}=(Xd(),S(Jo)),{straightThroughBufferTask:Ra,straightThroughStringTask:z}=(x(),S(Ar));function v(h,g){this._executor=new r(h.binary,h.baseDir,new s(h.maxConcurrentProcesses),g),this._trimmed=h.trimmed}(v.prototype=Object.create(n.prototype)).constructor=v,v.prototype.customBinary=function(h){return this._executor.binary=h,this},v.prototype.env=function(h,g){return arguments.length===1&&typeof h=="object"?this._executor.env=h:(this._executor.env=this._executor.env||{})[h]=g,this},v.prototype.stashList=function(h){return this._runTask(ya(M(arguments)||{},a(h)&&h||[]),m(arguments))};function pn(h,g,k,q){return typeof k!="string"?i(`git.${h}() requires a string 'repoPath'`):g(k,f(q,c),d(arguments))}v.prototype.clone=function(){return this._runTask(pn("clone",Ne,...arguments),m(arguments))},v.prototype.mirror=function(){return this._runTask(pn("mirror",Vt,...arguments),m(arguments))},v.prototype.mv=function(h,g){return this._runTask(ca(h,g),m(arguments))},v.prototype.checkoutLatestTag=function(h){var g=this;return this.pull(function(){g.tags(function(k,q){g.checkout(q.latest,h)})})},v.prototype.pull=function(h,g,k,q){return this._runTask(la(f(h,c),f(g,c),d(arguments)),m(arguments))},v.prototype.fetch=function(h,g){return this._runTask(ua(f(h,c),f(g,c),d(arguments)),m(arguments))},v.prototype.silent=function(h){return console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3"),this},v.prototype.tags=function(h,g){return this._runTask(Sa(d(arguments)),m(arguments))},v.prototype.rebase=function(){return this._runTask(z(["rebase",...d(arguments)]),m(arguments))},v.prototype.reset=function(h){return this._runTask(va(_a(h),d(arguments)),m(arguments))},v.prototype.revert=function(h){let g=m(arguments);return typeof h!="string"?this._runTask(i("Commit must be a string"),g):this._runTask(z(["revert",...d(arguments,0,!0),h]),g)},v.prototype.addTag=function(h){let g=typeof h=="string"?Ca(h):i("Git.addTag requires a tag name");return this._runTask(g,m(arguments))},v.prototype.addAnnotatedTag=function(h,g){return this._runTask(Oa(h,g),m(arguments))},v.prototype.checkout=function(){let h=["checkout",...d(arguments,!0)];return this._runTask(z(h),m(arguments))},v.prototype.checkoutBranch=function(h,g,k){return this.checkout(["-b",h,g],m(arguments))},v.prototype.checkoutLocalBranch=function(h,g){return this.checkout(["-b",h],m(arguments))},v.prototype.deleteLocalBranch=function(h,g,k){return this._runTask(Gt(h,typeof g=="boolean"?g:!1),m(arguments))},v.prototype.deleteLocalBranches=function(h,g,k){return this._runTask(we(h,typeof g=="boolean"?g:!1),m(arguments))},v.prototype.branch=function(h,g){return this._runTask(I(d(arguments)),m(arguments))},v.prototype.branchLocal=function(h){return this._runTask(ne(),m(arguments))},v.prototype.raw=function(h){let g=!Array.isArray(h),k=[].slice.call(g?arguments:h,0);for(let X=0;X<k.length&&g;X++)if(!l(k[X])){k.splice(X,k.length-X);break}k.push(...d(arguments,0,!0));var q=m(arguments);return k.length?this._runTask(z(k,this._trimmed),q):this._runTask(i("Raw: must supply one or more command to execute"),q)},v.prototype.submoduleAdd=function(h,g,k){return this._runTask(ba(h,g),m(arguments))},v.prototype.submoduleUpdate=function(h,g){return this._runTask(ka(d(arguments,!0)),m(arguments))},v.prototype.submoduleInit=function(h,g){return this._runTask(wa(d(arguments,!0)),m(arguments))},v.prototype.subModule=function(h,g){return this._runTask(Ta(d(arguments)),m(arguments))},v.prototype.listRemote=function(){return this._runTask(pa(d(arguments)),m(arguments))},v.prototype.addRemote=function(h,g,k){return this._runTask(da(h,g,d(arguments)),m(arguments))},v.prototype.removeRemote=function(h,g){return this._runTask(ga(h),m(arguments))},v.prototype.getRemotes=function(h,g){return this._runTask(ha(h===!0),m(arguments))},v.prototype.remote=function(h,g){return this._runTask(ma(d(arguments)),m(arguments))},v.prototype.tag=function(h,g){let k=d(arguments);return k[0]!=="tag"&&k.unshift("tag"),this._runTask(z(k),m(arguments))},v.prototype.updateServerInfo=function(h){return this._runTask(z(["update-server-info"]),m(arguments))},v.prototype.pushTags=function(h,g){let k=fa({remote:f(h,c)},d(arguments));return this._runTask(k,m(arguments))},v.prototype.rm=function(h){return this._runTask(z(["rm","-f",...o(h)]),m(arguments))},v.prototype.rmKeepLocal=function(h){return this._runTask(z(["rm","--cached",...o(h)]),m(arguments))},v.prototype.catFile=function(h,g){return this._catFile("utf-8",arguments)},v.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)},v.prototype._catFile=function(h,g){var k=m(g),q=["cat-file"],X=g[0];if(typeof X=="string")return this._runTask(i("Git.catFile: options must be supplied as an array of strings"),k);Array.isArray(X)&&q.push.apply(q,X);let zt=h==="buffer"?Ra(q):z(q);return this._runTask(zt,k)},v.prototype.diff=function(h,g){let k=c(h)?i("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):z(["diff",...d(arguments)]);return this._runTask(k,m(arguments))},v.prototype.diffSummary=function(){return this._runTask(aa(d(arguments,1)),m(arguments))},v.prototype.applyPatch=function(h){let g=u(h)?H(o(h),d([].slice.call(arguments,1))):i("git.applyPatch requires one or more string patches as the first argument");return this._runTask(g,m(arguments))},v.prototype.revparse=function(){let h=["rev-parse",...d(arguments,!0)];return this._runTask(z(h,!0),m(arguments))},v.prototype.show=function(h,g){return this._runTask(z(["show",...d(arguments,1)]),m(arguments))},v.prototype.clean=function(h,g,k){let q=Ht(h),X=q&&h.join("")||f(h,c)||"",zt=d([].slice.call(arguments,q?1:0));return this._runTask(Ze(X,zt),m(arguments))},v.prototype.exec=function(h){let g={commands:[],format:"utf-8",parser(){typeof h=="function"&&h()}};return this._runTask(g)},v.prototype.clearQueue=function(){return this},v.prototype.checkIgnore=function(h,g){return this._runTask(Te(o(f(h,u,[]))),m(arguments))},v.prototype.checkIsRepo=function(h,g){return this._runTask(hn(f(h,c)),m(arguments))},t.exports=v}});he();var eh=class extends ae{constructor(e,t){super(void 0,t),this.config=e}};he();he();var Nr=class extends ae{constructor(e,t,r){super(e,r),this.task=e,this.plugin=t,Object.setPrototypeOf(this,new.target.prototype)}};Ie();Ys();mi();Ci();Ei();Pi();qi();function th(e){return e?[{type:"spawn.before",action(n,s){e.aborted&&s.kill(new Nr(void 0,"abort","Abort already signaled"))}},{type:"spawn.after",action(n,s){function i(){s.kill(new Nr(void 0,"abort","Abort signal received"))}e.addEventListener("abort",i),s.spawned.on("close",()=>e.removeEventListener("abort",i))}}]:void 0}b();function rh(e){let t=Ve(e,"-c");return{type:"spawn.args",action(r){return[...t,...r]}}}b();var Ws=(0,qe.deferred)().promise;function nh({onClose:e=!0,onExit:t=50}={}){function r(){let s=-1,i={close:(0,qe.deferred)(),closeTimeout:(0,qe.deferred)(),exit:(0,qe.deferred)(),exitTimeout:(0,qe.deferred)()},o=Promise.race([e===!1?Ws:i.closeTimeout.promise,t===!1?Ws:i.exitTimeout.promise]);return n(e,i.close,i.closeTimeout),n(t,i.exit,i.exitTimeout),{close(a){s=a,i.close.done()},exit(a){s=a,i.exit.done()},get exitCode(){return s},result:o}}function n(s,i,o){s!==!1&&(s===!0?i.promise:i.promise.then(()=>Sr(s))).then(o.done)}return{type:"spawn.after",action(s,i){return Ue(this,arguments,function*(o,{spawned:a,close:l}){var c,u;let f=r(),d=!0,m=()=>void(d=!1);(c=a.stdout)==null||c.on("data",m),(u=a.stderr)==null||u.on("data",m),a.on("error",m),a.on("close",M=>f.close(M)),a.on("exit",M=>f.exit(M));try{yield f.result,d&&(yield Sr(50)),l(f.exitCode)}catch(M){l(f.exitCode,M)}})}}}he();function sh(e){return!!(e.exitCode&&e.stdErr.length)}function ih(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function oh(e=!1,t=sh,r=ih){return(n,s)=>!e&&n||!t(s)?n:r(s)}function Ks(e){return{type:"task.error",action(t,r){let n=e(t.error,{stdErr:r.stdErr,stdOut:r.stdOut,exitCode:r.exitCode});return Buffer.isBuffer(n)?{error:new ae(void 0,n.toString("utf-8"))}:{error:n}}}}b();var ah=class{constructor(){this.plugins=new Set}add(e){let t=[];return de(e).forEach(r=>r&&this.plugins.add(T(t,r))),()=>{t.forEach(r=>this.plugins.delete(r))}}exec(e,t,r){let n=t,s=Object.freeze(Object.create(r));for(let i of this.plugins)i.type===e&&(n=i.action(n,s));return n}};b();function uh(e){let t="--progress",r=["checkout","clone","fetch","pull","push"];return[{type:"spawn.args",action(i,o){return r.includes(o.method)?ni(i,t):i}},{type:"spawn.after",action(i,o){var a;!o.commands.includes(t)||(a=o.spawned.stderr)==null||a.on("data",l=>{let c=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(l.toString("utf8"));!c||e({method:o.method,stage:ch(c[1]),progress:C(c[2]),processed:C(c[3]),total:C(c[4])})})}}]}function ch(e){return String(e.toLowerCase().split(" ",1))||"unknown"}b();function lh(e){let t=ii(e,["uid","gid"]);return{type:"spawn.options",action(r){return Q(Q({},t),r)}}}function fh({block:e}){if(e>0)return{type:"spawn.after",action(t,r){var n,s;let i;function o(){i&&clearTimeout(i),i=setTimeout(l,e)}function a(){var c,u;(c=r.spawned.stdout)==null||c.off("data",o),(u=r.spawned.stderr)==null||u.off("data",o),r.spawned.off("exit",a),r.spawned.off("close",a),i&&clearTimeout(i)}function l(){a(),r.kill(new Nr(void 0,"timeout","block timeout reached"))}(n=r.spawned.stdout)==null||n.on("data",o),(s=r.spawned.stderr)==null||s.on("data",o),r.spawned.on("exit",a),r.spawned.on("close",a),o()}}}b();var dh=Zd();function hh(e,t){let r=new ah,n=ci(e&&(typeof e=="string"?{baseDir:e}:e)||{},t);if(!Br(n.baseDir))throw new eh(n,"Cannot use simple-git on a directory that does not exist");return Array.isArray(n.config)&&r.add(rh(n.config)),r.add(nh(n.completion)),n.abort&&r.add(th(n.abort)),n.progress&&r.add(uh(n.progress)),n.timeout&&r.add(fh(n.timeout)),n.spawnOptions&&r.add(lh(n.spawnOptions)),r.add(Ks(oh(!0))),n.errors&&r.add(Ks(n.errors)),new dh(n,r)}Ie();var Qo=hh;var Yo="BREAKING CHANGES",Xo="Features",Zo="Bug Fixes",ea="- {{ #if (scope) }}**{{ scope }}:** {{ /if }}{{ message }} ({{ commit.hash }})";function fn(e){return e.toLowerCase().replace(/\s/gm,"-")}function Xe({options:e}){return e.module?`${fn(e.module)}-v`:"v"}function ta({prevTag:e,options:t}){return e==null?void 0:e.replace(Xe({options:t}),"")}function ra({prevVersion:e,changes:t}){if(!e)return console.log("No previous tag, using 1.0.0"),"1.0.0";let[r,n,s]=e.split(".").map(Number);return console.log(`Previous version: ${r}.${n}.${s}`),t.breakingChanges.length>0?(r++,n=0,s=0):t.features.length>0?(n++,s=0):t.fixes.length>0&&s++,`${r}.${n}.${s}`}async function na({git:e,options:t}){let r=(await e.tags()).all.reverse();console.log("Tags:",r);let n=Xe({options:t});console.log(`Finding latest tag that starts with "${n}"`);let s=r.find(i=>i.startsWith(n));return console.log(`Previous tag: ${s}`),s}async function sa({git:e,prevTag:t,options:r}){let n;return t?(console.log("Getting commits since previous tag"),n=await e.log({from:t,to:"HEAD"})):(console.log("Getting all commits"),n=await e.log()),n.all.filter(ph(r)).reverse()}function ph(e){let t;if(e.module){let r=e.scopes??[fn(e.module)];t=new RegExp(`^(feat!?|fix)\\((${r.join("|")})\\)`,"m")}else t=new RegExp("^(feat!?|fix)","m");return r=>t.test(r.message)}var ia=ke(require("templater.js"),1);async function oa(e={},t=Qo()){console.log("Options:",e);let r=await na({git:t,options:e}),n=ta({prevTag:r,options:e}),s=await sa({git:t,prevTag:r,options:e}),i=mh({commits:s}),o=gh({changes:i,options:e}),a=ra({prevVersion:n,changes:i}),l=Xe({options:e})+a,u={skipped:n===a,changelog:o,prevTag:r,prevVersion:n,nextTag:l,nextVersion:a};return console.log("Results:",u),u}function mh({commits:e}){let t={fixes:[],features:[],breakingChanges:[]};for(let r of e){if(r.message.startsWith("feat")){let n=_h(r);t.breakingChanges.push(...n)}r.message.startsWith("feat")?t.features.push(r):t.fixes.push(r)}return t}function gh({changes:e,options:t}){let r=[];if(t.prefix&&r.push(t.prefix.trim()),e.features.length>0){let n=t.fixHeading??Xo;r.push("",`### ${n}`,"",...e.features.map(dn(t)))}if(e.fixes.length>0){let n=t.fixHeading??Zo;r.push("",`### ${n}`,"",...e.fixes.map(dn(t)))}if(e.breakingChanges.length>0){let n=t.breakingChangeHeading??Yo;r.push("",`### ${n}`,"",...e.breakingChanges.map(dn(t)))}return t.suffix&&r.push(t.suffix.trim()),r.join(`
`).trim()}function dn({changeTemplate:e}){let t=(0,ia.default)(e??ea);return r=>{let n,s,o=/.*\((.*?)\):\s*?(.*)/.exec(r.message),l=/.*?:\s*?(.*)/.exec(r.message);if(o)n=o[1],s=o[2].trim();else if(l)s=l[1].trim();else throw Error("Could not parse commit: "+r.message);return t({message:s,scope:n,commit:r})}}function _h(e){let t=[];return e.message.includes("!:")&&t.push(e),e.body.split(`
`).forEach(r=>{r.startsWith("BREAKING CHANGE:")&&t.push({...e,message:r})}),t}console.log("Running");function vh(e){var t;return(t=pe(e))==null?void 0:t.split(",").map(r=>r.trim())}function pe(e){return(0,Ut.getInput)(e)||void 0}function yh(){let e,t=pe("module");return t?e={module:t,scopes:vh("scopes")}:e={},e.changeTemplate=pe("changeTemplate"),e.breakingChangeHeading=pe("breakingChangeHeading"),e.featHeading=pe("featHeading"),e.fixHeading=pe("fixHeading"),e.prefix=pe("prefix"),e.suffix=pe("suffix"),e}async function bh(){console.log("Running");let e=yh(),t=await oa(e);Object.entries(t).map(([r,n])=>(0,Ut.setOutput)(r,n))}bh().catch(e=>{console.error(e),process.exit(1)});
